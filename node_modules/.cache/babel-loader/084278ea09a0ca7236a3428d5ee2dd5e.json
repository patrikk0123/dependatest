{"ast":null,"code":"/* eslint-disable @typescript-eslint/consistent-type-definitions */\nimport * as React from 'react';\nimport { createPopper as defaultCreatePopper } from '../popper-core/popper';\nimport { useIsomorphicLayoutEffect } from '../../../../helpers/useIsomorphicLayout';\n\nconst isEqual = (a, b) => JSON.stringify(a) === JSON.stringify(b);\n/**\n * Simple ponyfill for Object.fromEntries\n */\n\n\nconst fromEntries = entries => entries.reduce((acc, _ref) => {\n  let [key, value] = _ref;\n  acc[key] = value;\n  return acc;\n}, {});\n\nconst EMPTY_MODIFIERS = [];\nexport const usePopper = function (referenceElement, popperElement) {\n  let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  const prevOptions = React.useRef(null);\n  const optionsWithDefaults = {\n    onFirstUpdate: options.onFirstUpdate,\n    placement: options.placement || 'bottom',\n    strategy: options.strategy || 'absolute',\n    modifiers: options.modifiers || EMPTY_MODIFIERS\n  };\n  const [state, setState] = React.useState({\n    styles: {\n      popper: {\n        position: optionsWithDefaults.strategy,\n        left: '0',\n        top: '0'\n      }\n    },\n    attributes: {}\n  });\n  const updateStateModifier = React.useMemo(() => ({\n    name: 'updateState',\n    enabled: true,\n    phase: 'write',\n    // eslint-disable-next-line no-shadow\n    fn: _ref2 => {\n      let {\n        state\n      } = _ref2;\n      const elements = Object.keys(state.elements);\n      setState({\n        styles: fromEntries(elements.map(element => [element, state.styles[element] || {}])),\n        attributes: fromEntries(elements.map(element => [element, state.attributes[element]]))\n      });\n    },\n    requires: ['computeStyles']\n  }), []);\n  const popperOptions = React.useMemo(() => {\n    const newOptions = {\n      onFirstUpdate: optionsWithDefaults.onFirstUpdate,\n      placement: optionsWithDefaults.placement,\n      strategy: optionsWithDefaults.strategy,\n      modifiers: [...optionsWithDefaults.modifiers, updateStateModifier, {\n        name: 'applyStyles',\n        enabled: false\n      }]\n    };\n\n    if (isEqual(prevOptions.current, newOptions)) {\n      return prevOptions.current || newOptions;\n    } else {\n      prevOptions.current = newOptions;\n      return newOptions;\n    }\n  }, [optionsWithDefaults.onFirstUpdate, optionsWithDefaults.placement, optionsWithDefaults.strategy, optionsWithDefaults.modifiers, updateStateModifier]);\n  const popperInstanceRef = React.useRef();\n  useIsomorphicLayoutEffect(() => {\n    if (popperInstanceRef && popperInstanceRef.current) {\n      popperInstanceRef.current.setOptions(popperOptions);\n    }\n  }, [popperOptions]);\n  useIsomorphicLayoutEffect(() => {\n    if (referenceElement == null || popperElement == null) {\n      return;\n    }\n\n    const createPopper = options.createPopper || defaultCreatePopper;\n    const popperInstance = createPopper(referenceElement, popperElement, popperOptions);\n    popperInstanceRef.current = popperInstance;\n    return () => {\n      popperInstance.destroy();\n      popperInstanceRef.current = null;\n    };\n  }, [referenceElement, popperElement, options.createPopper]);\n  return {\n    state: popperInstanceRef.current ? popperInstanceRef.current.state : null,\n    styles: state.styles,\n    attributes: state.attributes,\n    update: popperInstanceRef.current ? popperInstanceRef.current.update : null,\n    forceUpdate: popperInstanceRef.current ? popperInstanceRef.current.forceUpdate : null\n  };\n};","map":{"version":3,"mappings":"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","names":["React","createPopper","defaultCreatePopper","useIsomorphicLayoutEffect","isEqual","a","b","JSON","stringify","fromEntries","entries","reduce","acc","key","value","EMPTY_MODIFIERS","usePopper","referenceElement","popperElement","options","prevOptions","useRef","optionsWithDefaults","onFirstUpdate","placement","strategy","modifiers","state","setState","useState","styles","popper","position","left","top","attributes","updateStateModifier","useMemo","name","enabled","phase","fn","elements","Object","keys","map","element","requires","popperOptions","newOptions","current","popperInstanceRef","setOptions","popperInstance","destroy","update","forceUpdate"],"sources":["/home/pkorytar/Projects/RedHat/pnc-web-ui-react/node_modules/@patternfly/react-core/src/helpers/Popper/thirdparty/react-popper/usePopper.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/consistent-type-definitions */\n\nimport * as React from 'react';\nimport { createPopper as defaultCreatePopper, Options as PopperOptions, VirtualElement } from '../popper-core/popper';\nimport { useIsomorphicLayoutEffect } from '../../../../helpers/useIsomorphicLayout';\n\ntype $Shape<T extends object> = Partial<T>;\n\nconst isEqual = (a: any, b: any) => JSON.stringify(a) === JSON.stringify(b);\n\n/**\n * Simple ponyfill for Object.fromEntries\n */\nconst fromEntries = (entries: [string, any][]) =>\n  entries.reduce((acc: any, [key, value]) => {\n    acc[key] = value;\n    return acc;\n  }, {});\n\ntype Options = $Shape<\n  PopperOptions & {\n    createPopper: typeof defaultCreatePopper;\n  }\n>;\n\ntype State = {\n  styles: {\n    [key: string]: $Shape<CSSStyleDeclaration>;\n  };\n  attributes: {\n    [key: string]: {\n      [key: string]: string;\n    };\n  };\n};\n\nconst EMPTY_MODIFIERS: any = [];\n\nexport const usePopper = (\n  referenceElement: (Element | VirtualElement) | null | undefined,\n  popperElement: HTMLElement | null | undefined,\n  options: Options = {}\n) => {\n  const prevOptions = React.useRef<PopperOptions | null | undefined>(null);\n\n  const optionsWithDefaults = {\n    onFirstUpdate: options.onFirstUpdate,\n    placement: options.placement || 'bottom',\n    strategy: options.strategy || 'absolute',\n    modifiers: options.modifiers || EMPTY_MODIFIERS\n  };\n\n  const [state, setState] = React.useState<State>({\n    styles: {\n      popper: {\n        position: optionsWithDefaults.strategy,\n        left: '0',\n        top: '0'\n      }\n    },\n    attributes: {}\n  });\n\n  const updateStateModifier = React.useMemo(\n    () => ({\n      name: 'updateState',\n      enabled: true,\n      phase: 'write',\n      // eslint-disable-next-line no-shadow\n      fn: ({ state }: any) => {\n        const elements = Object.keys(state.elements);\n\n        setState({\n          styles: fromEntries(elements.map(element => [element, state.styles[element] || {}])),\n          attributes: fromEntries(elements.map(element => [element, state.attributes[element]]))\n        });\n      },\n      requires: ['computeStyles']\n    }),\n    []\n  );\n\n  const popperOptions = React.useMemo(() => {\n    const newOptions = {\n      onFirstUpdate: optionsWithDefaults.onFirstUpdate,\n      placement: optionsWithDefaults.placement,\n      strategy: optionsWithDefaults.strategy,\n      modifiers: [...optionsWithDefaults.modifiers, updateStateModifier, { name: 'applyStyles', enabled: false }]\n    };\n\n    if (isEqual(prevOptions.current, newOptions)) {\n      return prevOptions.current || newOptions;\n    } else {\n      prevOptions.current = newOptions;\n      return newOptions;\n    }\n  }, [\n    optionsWithDefaults.onFirstUpdate,\n    optionsWithDefaults.placement,\n    optionsWithDefaults.strategy,\n    optionsWithDefaults.modifiers,\n    updateStateModifier\n  ]);\n\n  const popperInstanceRef = React.useRef<any>();\n\n  useIsomorphicLayoutEffect(() => {\n    if (popperInstanceRef && popperInstanceRef.current) {\n      popperInstanceRef.current.setOptions(popperOptions);\n    }\n  }, [popperOptions]);\n\n  useIsomorphicLayoutEffect(() => {\n    if (referenceElement == null || popperElement == null) {\n      return;\n    }\n\n    const createPopper = options.createPopper || defaultCreatePopper;\n    const popperInstance = createPopper(referenceElement, popperElement, popperOptions);\n\n    popperInstanceRef.current = popperInstance;\n\n    return () => {\n      popperInstance.destroy();\n      popperInstanceRef.current = null;\n    };\n  }, [referenceElement, popperElement, options.createPopper]);\n\n  return {\n    state: popperInstanceRef.current ? popperInstanceRef.current.state : null,\n    styles: state.styles,\n    attributes: state.attributes,\n    update: popperInstanceRef.current ? popperInstanceRef.current.update : null,\n    forceUpdate: popperInstanceRef.current ? popperInstanceRef.current.forceUpdate : null\n  };\n};\n"]},"metadata":{},"sourceType":"module"}