{"ast":null,"code":"import { __rest } from \"tslib\";\nimport * as React from 'react';\nimport { css } from '@patternfly/react-styles';\nimport styles from '@patternfly/react-styles/css/components/TreeView/tree-view';\nimport { canUseDOM } from '../../helpers/util';\nimport { handleArrows } from '../../helpers';\nexport class TreeViewRoot extends React.Component {\n  constructor() {\n    super(...arguments);\n    this.displayName = 'TreeViewRoot';\n    this.treeRef = React.createRef();\n\n    this.handleKeys = event => {\n      if (this.treeRef.current !== event.target.closest('.pf-c-tree-view')) {\n        return;\n      }\n\n      const activeElement = document.activeElement;\n      const key = event.key;\n      const treeItems = Array.from(this.treeRef.current.getElementsByClassName('pf-c-tree-view__node')).filter(el => !el.classList.contains('pf-m-disabled'));\n\n      if (key === 'Space') {\n        document.activeElement.click();\n        event.preventDefault();\n      }\n\n      handleArrows(event, treeItems, element => activeElement === element, undefined, [], undefined, true, true);\n\n      if (['ArrowLeft', 'ArrowRight'].includes(key)) {\n        const isExpandable = activeElement.firstElementChild.firstElementChild.classList.contains('pf-c-tree-view__node-toggle');\n        const isExpanded = activeElement.closest('li').classList.contains('pf-m-expanded');\n\n        if (key === 'ArrowLeft') {\n          if (isExpandable && isExpanded) {\n            activeElement.click();\n          } else {\n            const parentList = activeElement.closest('ul').parentElement;\n\n            if (parentList.tagName !== 'DIV') {\n              const parentButton = parentList.querySelector('button');\n              activeElement.tabIndex = -1;\n              parentButton.tabIndex = 0;\n              parentButton.focus();\n            }\n          }\n        } else {\n          if (isExpandable && !isExpanded) {\n            activeElement.tabIndex = -1;\n            activeElement.click();\n            const childElement = activeElement.closest('li').querySelector('ul > li').querySelector('button');\n            childElement.tabIndex = 0;\n            childElement.focus();\n          }\n        }\n\n        event.preventDefault();\n      }\n    };\n\n    this.handleKeysCheckbox = event => {\n      if (this.treeRef.current !== event.target.closest('.pf-c-tree-view')) {\n        return;\n      }\n\n      const activeElement = document.activeElement;\n      const key = event.key;\n\n      if (key === 'Space') {\n        document.activeElement.click();\n        event.preventDefault();\n      }\n\n      const treeNodes = Array.from(this.treeRef.current.getElementsByClassName('pf-c-tree-view__node'));\n      handleArrows(event, treeNodes, element => element.contains(activeElement), element => element.querySelector('BUTTON,INPUT'), [], undefined, true, true);\n\n      if (['ArrowLeft', 'ArrowRight'].includes(key)) {\n        if (key === 'ArrowLeft') {\n          if (activeElement.tagName === 'INPUT') {\n            activeElement.parentElement.previousSibling && activeElement.parentElement.previousSibling.focus();\n          } else if (activeElement.previousSibling) {\n            if (activeElement.previousElementSibling.tagName === 'SPAN') {\n              activeElement.previousSibling.firstChild.focus();\n            } else {\n              activeElement.previousSibling.focus();\n            }\n          }\n        } else {\n          if (activeElement.tagName === 'INPUT') {\n            activeElement.parentElement.nextSibling && activeElement.parentElement.nextSibling.focus();\n          } else if (activeElement.nextSibling) {\n            if (activeElement.nextElementSibling.tagName === 'SPAN') {\n              activeElement.nextSibling.firstChild.focus();\n            } else {\n              activeElement.nextSibling.focus();\n            }\n          }\n        }\n\n        event.preventDefault();\n      }\n    };\n\n    this.variantStyleModifiers = {\n      default: '',\n      compact: styles.modifiers.compact,\n      compactNoBackground: [styles.modifiers.compact, styles.modifiers.noBackground]\n    };\n  }\n\n  componentDidMount() {\n    if (canUseDOM) {\n      window.addEventListener('keydown', this.props.hasChecks ? this.handleKeysCheckbox : this.handleKeys);\n    }\n\n    if (this.props.hasChecks) {\n      const firstToggle = this.treeRef.current.getElementsByClassName('pf-c-tree-view__node-toggle')[0];\n\n      if (firstToggle) {\n        firstToggle.tabIndex = 0;\n      }\n\n      const firstInput = this.treeRef.current.getElementsByTagName('INPUT')[0];\n\n      if (firstInput) {\n        firstInput.tabIndex = 0;\n      }\n    } else {\n      this.treeRef.current.getElementsByClassName('pf-c-tree-view__node')[0].tabIndex = 0;\n    }\n  }\n\n  componentWillUnmount() {\n    if (canUseDOM) {\n      window.removeEventListener('keydown', this.props.hasChecks ? this.handleKeysCheckbox : this.handleKeys);\n    }\n  }\n\n  render() {\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    const _a = this.props,\n          {\n      children,\n      hasChecks,\n      hasGuides,\n      variant,\n      className\n    } = _a,\n          props = __rest(_a, [\"children\", \"hasChecks\", \"hasGuides\", \"variant\", \"className\"]);\n\n    return React.createElement(\"div\", Object.assign({\n      className: css(styles.treeView, hasGuides && styles.modifiers.guides, this.variantStyleModifiers[variant], className),\n      ref: this.treeRef\n    }, props), children);\n  }\n\n}","map":{"version":3,"mappings":";AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,SAASC,GAAT,QAAoB,0BAApB;AACA,OAAOC,MAAP,MAAmB,4DAAnB;AACA,SAASC,SAAT,QAA0B,oBAA1B;AACA,SAASC,YAAT,QAA6B,eAA7B;AAeA,OAAM,MAAOC,YAAP,SAA4BL,KAAK,CAACM,SAAlC,CAA8D;EAApEC;;IACE,mBAAc,cAAd;IACQ,eAAUP,KAAK,CAACQ,SAAN,EAAV;;IA0BR,kBAAcC,KAAD,IAAyB;MACpC,IAAI,KAAKC,OAAL,CAAaC,OAAb,KAA0BF,KAAK,CAACG,MAAN,CAA6BC,OAA7B,CAAqC,iBAArC,CAA9B,EAAuF;QACrF;MACD;;MACD,MAAMC,aAAa,GAAGC,QAAQ,CAACD,aAA/B;MACA,MAAME,GAAG,GAAGP,KAAK,CAACO,GAAlB;MACA,MAAMC,SAAS,GAAGC,KAAK,CAACC,IAAN,CAAW,KAAKT,OAAL,CAAaC,OAAb,CAAqBS,sBAArB,CAA4C,sBAA5C,CAAX,EAAgFC,MAAhF,CAChBC,EAAE,IAAI,CAACA,EAAE,CAACC,SAAH,CAAaC,QAAb,CAAsB,eAAtB,CADS,CAAlB;;MAIA,IAAIR,GAAG,KAAK,OAAZ,EAAqB;QAClBD,QAAQ,CAACD,aAAT,CAAuCW,KAAvC;QACDhB,KAAK,CAACiB,cAAN;MACD;;MAEDtB,YAAY,CACVK,KADU,EAEVQ,SAFU,EAGTU,OAAD,IAAsBb,aAAa,KAAKa,OAH9B,EAIVC,SAJU,EAKV,EALU,EAMVA,SANU,EAOV,IAPU,EAQV,IARU,CAAZ;;MAWA,IAAI,CAAC,WAAD,EAAc,YAAd,EAA4BC,QAA5B,CAAqCb,GAArC,CAAJ,EAA+C;QAC7C,MAAMc,YAAY,GAAGhB,aAAa,CAACiB,iBAAd,CAAgCA,iBAAhC,CAAkDR,SAAlD,CAA4DC,QAA5D,CACnB,6BADmB,CAArB;QAGA,MAAMQ,UAAU,GAAGlB,aAAa,CAACD,OAAd,CAAsB,IAAtB,EAA4BU,SAA5B,CAAsCC,QAAtC,CAA+C,eAA/C,CAAnB;;QACA,IAAIR,GAAG,KAAK,WAAZ,EAAyB;UACvB,IAAIc,YAAY,IAAIE,UAApB,EAAgC;YAC7BlB,aAA6B,CAACW,KAA9B;UACF,CAFD,MAEO;YACL,MAAMQ,UAAU,GAAGnB,aAAa,CAACD,OAAd,CAAsB,IAAtB,EAA4BqB,aAA/C;;YACA,IAAID,UAAU,CAACE,OAAX,KAAuB,KAA3B,EAAkC;cAChC,MAAMC,YAAY,GAAGH,UAAU,CAACI,aAAX,CAAyB,QAAzB,CAArB;cACCvB,aAA6B,CAACwB,QAA9B,GAAyC,CAAC,CAA1C;cACDF,YAAY,CAACE,QAAb,GAAwB,CAAxB;cACAF,YAAY,CAACG,KAAb;YACD;UACF;QACF,CAZD,MAYO;UACL,IAAIT,YAAY,IAAI,CAACE,UAArB,EAAiC;YAC9BlB,aAA6B,CAACwB,QAA9B,GAAyC,CAAC,CAA1C;YACAxB,aAA6B,CAACW,KAA9B;YACD,MAAMe,YAAY,GAAG1B,aAAa,CAC/BD,OADkB,CACV,IADU,EAElBwB,aAFkB,CAEJ,SAFI,EAGlBA,aAHkB,CAGJ,QAHI,CAArB;YAIAG,YAAY,CAACF,QAAb,GAAwB,CAAxB;YACAE,YAAY,CAACD,KAAb;UACD;QACF;;QACD9B,KAAK,CAACiB,cAAN;MACD;IACF,CAzDD;;IA2DA,0BAAsBjB,KAAD,IAAyB;MAC5C,IAAI,KAAKC,OAAL,CAAaC,OAAb,KAA0BF,KAAK,CAACG,MAAN,CAA6BC,OAA7B,CAAqC,iBAArC,CAA9B,EAAuF;QACrF;MACD;;MACD,MAAMC,aAAa,GAAGC,QAAQ,CAACD,aAA/B;MACA,MAAME,GAAG,GAAGP,KAAK,CAACO,GAAlB;;MAEA,IAAIA,GAAG,KAAK,OAAZ,EAAqB;QAClBD,QAAQ,CAACD,aAAT,CAAuCW,KAAvC;QACDhB,KAAK,CAACiB,cAAN;MACD;;MAED,MAAMe,SAAS,GAAGvB,KAAK,CAACC,IAAN,CAAW,KAAKT,OAAL,CAAaC,OAAb,CAAqBS,sBAArB,CAA4C,sBAA5C,CAAX,CAAlB;MAEAhB,YAAY,CACVK,KADU,EAEVgC,SAFU,EAGTd,OAAD,IAAsBA,OAAO,CAACH,QAAR,CAAiBV,aAAjB,CAHZ,EAITa,OAAD,IAAsBA,OAAO,CAACU,aAAR,CAAsB,cAAtB,CAJZ,EAKV,EALU,EAMVT,SANU,EAOV,IAPU,EAQV,IARU,CAAZ;;MAWA,IAAI,CAAC,WAAD,EAAc,YAAd,EAA4BC,QAA5B,CAAqCb,GAArC,CAAJ,EAA+C;QAC7C,IAAIA,GAAG,KAAK,WAAZ,EAAyB;UACvB,IAAIF,aAAa,CAACqB,OAAd,KAA0B,OAA9B,EAAuC;YACrCrB,aAAa,CAACoB,aAAd,CAA4BQ,eAA5B,IACG5B,aAAa,CAACoB,aAAd,CAA4BQ,eAA5B,CAA4DH,KAA5D,EADH;UAED,CAHD,MAGO,IAAIzB,aAAa,CAAC4B,eAAlB,EAAmC;YACxC,IAAI5B,aAAa,CAAC6B,sBAAd,CAAqCR,OAArC,KAAiD,MAArD,EAA6D;cAC1DrB,aAAa,CAAC4B,eAAd,CAA8BE,UAA9B,CAAyDL,KAAzD;YACF,CAFD,MAEO;cACJzB,aAAa,CAAC4B,eAAd,CAA8CH,KAA9C;YACF;UACF;QACF,CAXD,MAWO;UACL,IAAIzB,aAAa,CAACqB,OAAd,KAA0B,OAA9B,EAAuC;YACrCrB,aAAa,CAACoB,aAAd,CAA4BW,WAA5B,IAA4C/B,aAAa,CAACoB,aAAd,CAA4BW,WAA5B,CAAwDN,KAAxD,EAA5C;UACD,CAFD,MAEO,IAAIzB,aAAa,CAAC+B,WAAlB,EAA+B;YACpC,IAAI/B,aAAa,CAACgC,kBAAd,CAAiCX,OAAjC,KAA6C,MAAjD,EAAyD;cACtDrB,aAAa,CAAC+B,WAAd,CAA0BD,UAA1B,CAAqDL,KAArD;YACF,CAFD,MAEO;cACJzB,aAAa,CAAC+B,WAAd,CAA0CN,KAA1C;YACF;UACF;QACF;;QACD9B,KAAK,CAACiB,cAAN;MACD;IACF,CAlDD;;IAoDA,6BAAsF;MACpFqB,OAAO,EAAE,EAD2E;MAEpFC,OAAO,EAAE9C,MAAM,CAAC+C,SAAP,CAAiBD,OAF0D;MAGpFE,mBAAmB,EAAE,CAAChD,MAAM,CAAC+C,SAAP,CAAiBD,OAAlB,EAA2B9C,MAAM,CAAC+C,SAAP,CAAiBE,YAA5C;IAH+D,CAAtF;EAwBD;;EA/JCC,iBAAiB;IACf,IAAIjD,SAAJ,EAAe;MACbkD,MAAM,CAACC,gBAAP,CAAwB,SAAxB,EAAmC,KAAKC,KAAL,CAAWC,SAAX,GAAuB,KAAKC,kBAA5B,GAAiD,KAAKC,UAAzF;IACD;;IACD,IAAI,KAAKH,KAAL,CAAWC,SAAf,EAA0B;MACxB,MAAMG,WAAW,GAAG,KAAKjD,OAAL,CAAaC,OAAb,CAAqBS,sBAArB,CAA4C,6BAA5C,EAA2E,CAA3E,CAApB;;MACA,IAAIuC,WAAJ,EAAiB;QACfA,WAAW,CAACrB,QAAZ,GAAuB,CAAvB;MACD;;MACD,MAAMsB,UAAU,GAAG,KAAKlD,OAAL,CAAaC,OAAb,CAAqBkD,oBAArB,CAA0C,OAA1C,EAAmD,CAAnD,CAAnB;;MACA,IAAID,UAAJ,EAAgB;QACdA,UAAU,CAACtB,QAAX,GAAsB,CAAtB;MACD;IACF,CATD,MASO;MACJ,KAAK5B,OAAL,CAAaC,OAAb,CAAqBS,sBAArB,CAA4C,sBAA5C,EAAoE,CAApE,EAAuFkB,QAAvF,GAAkG,CAAlG;IACF;EACF;;EAEDwB,oBAAoB;IAClB,IAAI3D,SAAJ,EAAe;MACbkD,MAAM,CAACU,mBAAP,CAA2B,SAA3B,EAAsC,KAAKR,KAAL,CAAWC,SAAX,GAAuB,KAAKC,kBAA5B,GAAiD,KAAKC,UAA5F;IACD;EACF;;EAuHDM,MAAM;IACJ;IACA,MAAMC,KAAmE,KAAKV,KAA9E;IAAA,MAAM;MAAEW,QAAF;MAAYV,SAAZ;MAAuBW,SAAvB;MAAkCC,OAAlC;MAA2CC;IAA3C,IAAoDJ,EAA1D;IAAA,MAA+DV,KAAK,cAA9D,8DAA8D,CAApE;;IACA,OACEvD;MACEqE,SAAS,EAAEpE,GAAG,CACZC,MAAM,CAACoE,QADK,EAEZH,SAAS,IAAIjE,MAAM,CAAC+C,SAAP,CAAiBsB,MAFlB,EAGZ,KAAKC,qBAAL,CAA2BJ,OAA3B,CAHY,EAIZC,SAJY,CADhB;MAOEI,GAAG,EAAE,KAAK/D;IAPZ,GAQM6C,KARN,GAUGW,QAVH,CADF;EAcD;;AAlKiE","names":["React","css","styles","canUseDOM","handleArrows","TreeViewRoot","Component","constructor","createRef","event","treeRef","current","target","closest","activeElement","document","key","treeItems","Array","from","getElementsByClassName","filter","el","classList","contains","click","preventDefault","element","undefined","includes","isExpandable","firstElementChild","isExpanded","parentList","parentElement","tagName","parentButton","querySelector","tabIndex","focus","childElement","treeNodes","previousSibling","previousElementSibling","firstChild","nextSibling","nextElementSibling","default","compact","modifiers","compactNoBackground","noBackground","componentDidMount","window","addEventListener","props","hasChecks","handleKeysCheckbox","handleKeys","firstToggle","firstInput","getElementsByTagName","componentWillUnmount","removeEventListener","render","_a","children","hasGuides","variant","className","treeView","guides","variantStyleModifiers","ref"],"sources":["/home/pkorytar/Projects/RedHat/pnc-web-ui-react/node_modules/@patternfly/react-core/src/components/TreeView/TreeViewRoot.tsx"],"sourcesContent":["import * as React from 'react';\nimport { css } from '@patternfly/react-styles';\nimport styles from '@patternfly/react-styles/css/components/TreeView/tree-view';\nimport { canUseDOM } from '../../helpers/util';\nimport { handleArrows } from '../../helpers';\n\nexport interface TreeViewRootProps {\n  /** Child nodes of the tree view */\n  children: React.ReactNode;\n  /** Flag indicating if the tree view has checkboxes */\n  hasChecks?: boolean;\n  /** Flag indicating if tree view has guide lines. */\n  hasGuides?: boolean;\n  /** Variant presentation styles for the tree view. */\n  variant?: 'default' | 'compact' | 'compactNoBackground';\n  /** Class to add to add if not passed a parentItem */\n  className?: string;\n}\n\nexport class TreeViewRoot extends React.Component<TreeViewRootProps> {\n  displayName = 'TreeViewRoot';\n  private treeRef = React.createRef<HTMLDivElement>();\n\n  componentDidMount() {\n    if (canUseDOM) {\n      window.addEventListener('keydown', this.props.hasChecks ? this.handleKeysCheckbox : this.handleKeys);\n    }\n    if (this.props.hasChecks) {\n      const firstToggle = this.treeRef.current.getElementsByClassName('pf-c-tree-view__node-toggle')[0] as HTMLElement;\n      if (firstToggle) {\n        firstToggle.tabIndex = 0;\n      }\n      const firstInput = this.treeRef.current.getElementsByTagName('INPUT')[0] as HTMLElement;\n      if (firstInput) {\n        firstInput.tabIndex = 0;\n      }\n    } else {\n      (this.treeRef.current.getElementsByClassName('pf-c-tree-view__node')[0] as HTMLElement).tabIndex = 0;\n    }\n  }\n\n  componentWillUnmount() {\n    if (canUseDOM) {\n      window.removeEventListener('keydown', this.props.hasChecks ? this.handleKeysCheckbox : this.handleKeys);\n    }\n  }\n\n  handleKeys = (event: KeyboardEvent) => {\n    if (this.treeRef.current !== (event.target as HTMLElement).closest('.pf-c-tree-view')) {\n      return;\n    }\n    const activeElement = document.activeElement;\n    const key = event.key;\n    const treeItems = Array.from(this.treeRef.current.getElementsByClassName('pf-c-tree-view__node')).filter(\n      el => !el.classList.contains('pf-m-disabled')\n    );\n\n    if (key === 'Space') {\n      (document.activeElement as HTMLElement).click();\n      event.preventDefault();\n    }\n\n    handleArrows(\n      event,\n      treeItems,\n      (element: Element) => activeElement === element,\n      undefined,\n      [],\n      undefined,\n      true,\n      true\n    );\n\n    if (['ArrowLeft', 'ArrowRight'].includes(key)) {\n      const isExpandable = activeElement.firstElementChild.firstElementChild.classList.contains(\n        'pf-c-tree-view__node-toggle'\n      );\n      const isExpanded = activeElement.closest('li').classList.contains('pf-m-expanded');\n      if (key === 'ArrowLeft') {\n        if (isExpandable && isExpanded) {\n          (activeElement as HTMLElement).click();\n        } else {\n          const parentList = activeElement.closest('ul').parentElement;\n          if (parentList.tagName !== 'DIV') {\n            const parentButton = parentList.querySelector('button');\n            (activeElement as HTMLElement).tabIndex = -1;\n            parentButton.tabIndex = 0;\n            parentButton.focus();\n          }\n        }\n      } else {\n        if (isExpandable && !isExpanded) {\n          (activeElement as HTMLElement).tabIndex = -1;\n          (activeElement as HTMLElement).click();\n          const childElement = activeElement\n            .closest('li')\n            .querySelector('ul > li')\n            .querySelector('button');\n          childElement.tabIndex = 0;\n          childElement.focus();\n        }\n      }\n      event.preventDefault();\n    }\n  };\n\n  handleKeysCheckbox = (event: KeyboardEvent) => {\n    if (this.treeRef.current !== (event.target as HTMLElement).closest('.pf-c-tree-view')) {\n      return;\n    }\n    const activeElement = document.activeElement;\n    const key = event.key;\n\n    if (key === 'Space') {\n      (document.activeElement as HTMLElement).click();\n      event.preventDefault();\n    }\n\n    const treeNodes = Array.from(this.treeRef.current.getElementsByClassName('pf-c-tree-view__node'));\n\n    handleArrows(\n      event,\n      treeNodes as HTMLElement[],\n      (element: Element) => element.contains(activeElement),\n      (element: Element) => element.querySelector('BUTTON,INPUT'),\n      [],\n      undefined,\n      true,\n      true\n    );\n\n    if (['ArrowLeft', 'ArrowRight'].includes(key)) {\n      if (key === 'ArrowLeft') {\n        if (activeElement.tagName === 'INPUT') {\n          activeElement.parentElement.previousSibling &&\n            (activeElement.parentElement.previousSibling as HTMLElement).focus();\n        } else if (activeElement.previousSibling) {\n          if (activeElement.previousElementSibling.tagName === 'SPAN') {\n            (activeElement.previousSibling.firstChild as HTMLElement).focus();\n          } else {\n            (activeElement.previousSibling as HTMLElement).focus();\n          }\n        }\n      } else {\n        if (activeElement.tagName === 'INPUT') {\n          activeElement.parentElement.nextSibling && (activeElement.parentElement.nextSibling as HTMLElement).focus();\n        } else if (activeElement.nextSibling) {\n          if (activeElement.nextElementSibling.tagName === 'SPAN') {\n            (activeElement.nextSibling.firstChild as HTMLElement).focus();\n          } else {\n            (activeElement.nextSibling as HTMLElement).focus();\n          }\n        }\n      }\n      event.preventDefault();\n    }\n  };\n\n  variantStyleModifiers: { [key in TreeViewRootProps['variant']]: string | string[] } = {\n    default: '',\n    compact: styles.modifiers.compact,\n    compactNoBackground: [styles.modifiers.compact, styles.modifiers.noBackground]\n  };\n\n  render() {\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    const { children, hasChecks, hasGuides, variant, className, ...props } = this.props;\n    return (\n      <div\n        className={css(\n          styles.treeView,\n          hasGuides && styles.modifiers.guides,\n          this.variantStyleModifiers[variant],\n          className\n        )}\n        ref={this.treeRef}\n        {...props}\n      >\n        {children}\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}