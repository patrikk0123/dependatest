{"ast":null,"code":"import _slicedToArray from \"/home/pkorytar/Projects/RedHat/pnc-web-ui-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport { __rest } from \"tslib\";\nimport * as React from 'react';\nimport styles from '@patternfly/react-styles/css/components/Nav/nav';\nimport { css } from '@patternfly/react-styles';\nimport { NavContext } from './Nav';\nimport { PageSidebarContext } from '../Page/PageSidebar';\nimport { useOUIAProps } from '../../helpers';\nimport { Popper } from '../../helpers/Popper/Popper';\nimport AngleRightIcon from '@patternfly/react-icons/dist/esm/icons/angle-right-icon';\nexport var NavItem = function NavItem(_a) {\n  var children = _a.children,\n      _a$styleChildren = _a.styleChildren,\n      styleChildren = _a$styleChildren === void 0 ? true : _a$styleChildren,\n      className = _a.className,\n      to = _a.to,\n      _a$isActive = _a.isActive,\n      isActive = _a$isActive === void 0 ? false : _a$isActive,\n      _a$groupId = _a.groupId,\n      groupId = _a$groupId === void 0 ? null : _a$groupId,\n      _a$itemId = _a.itemId,\n      itemId = _a$itemId === void 0 ? null : _a$itemId,\n      _a$preventDefault = _a.preventDefault,\n      preventDefault = _a$preventDefault === void 0 ? false : _a$preventDefault,\n      _a$onClick = _a.onClick,\n      _onClick = _a$onClick === void 0 ? null : _a$onClick,\n      _a$component = _a.component,\n      component = _a$component === void 0 ? 'a' : _a$component,\n      flyout = _a.flyout,\n      onShowFlyout = _a.onShowFlyout,\n      ouiaId = _a.ouiaId,\n      ouiaSafe = _a.ouiaSafe,\n      props = __rest(_a, [\"children\", \"styleChildren\", \"className\", \"to\", \"isActive\", \"groupId\", \"itemId\", \"preventDefault\", \"onClick\", \"component\", \"flyout\", \"onShowFlyout\", \"ouiaId\", \"ouiaSafe\"]);\n\n  var _React$useContext = React.useContext(NavContext),\n      flyoutRef = _React$useContext.flyoutRef,\n      setFlyoutRef = _React$useContext.setFlyoutRef;\n\n  var _React$useContext2 = React.useContext(PageSidebarContext),\n      isNavOpen = _React$useContext2.isNavOpen;\n\n  var _React$useState = React.useState(null),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      flyoutTarget = _React$useState2[0],\n      setFlyoutTarget = _React$useState2[1];\n\n  var _React$useState3 = React.useState(false),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      isHovered = _React$useState4[0],\n      setIsHovered = _React$useState4[1];\n\n  var ref = React.useRef();\n  var flyoutVisible = ref === flyoutRef;\n  var popperRef = React.useRef();\n  var Component = component;\n  var hasFlyout = flyout !== undefined;\n\n  var showFlyout = function showFlyout(show, override) {\n    if ((!flyoutVisible || override) && show) {\n      setFlyoutRef(ref);\n    } else if ((flyoutVisible || override) && !show) {\n      setFlyoutRef(null);\n    }\n\n    onShowFlyout && show && onShowFlyout();\n  };\n\n  var onMouseOver = function onMouseOver(event) {\n    var evtContainedInFlyout = event.target.closest('.pf-c-nav__item.pf-m-flyout');\n\n    if (hasFlyout && !flyoutVisible) {\n      showFlyout(true);\n    } else if (flyoutRef !== null && !evtContainedInFlyout) {\n      setFlyoutRef(null);\n    }\n  };\n\n  var onFlyoutClick = function onFlyoutClick(event) {\n    var target = event.target;\n    var closestItem = target.closest('.pf-m-flyout');\n\n    if (!closestItem) {\n      if (hasFlyout) {\n        showFlyout(false, true);\n      } else if (flyoutRef !== null) {\n        setFlyoutRef(null);\n      }\n    }\n  };\n\n  var handleFlyout = function handleFlyout(event) {\n    var _a, _b;\n\n    var key = event.key;\n    var target = event.target;\n\n    if (!(((_a = popperRef === null || popperRef === void 0 ? void 0 : popperRef.current) === null || _a === void 0 ? void 0 : _a.contains(target)) || hasFlyout && ((_b = ref === null || ref === void 0 ? void 0 : ref.current) === null || _b === void 0 ? void 0 : _b.contains(target)))) {\n      return;\n    }\n\n    if (key === ' ' || key === 'ArrowRight') {\n      event.stopPropagation();\n      event.preventDefault();\n\n      if (!flyoutVisible) {\n        showFlyout(true);\n        setFlyoutTarget(target);\n      }\n    }\n\n    if (key === 'Escape' || key === 'ArrowLeft') {\n      if (flyoutVisible) {\n        event.stopPropagation();\n        event.preventDefault();\n        showFlyout(false);\n      }\n    }\n  };\n\n  React.useEffect(function () {\n    if (hasFlyout) {\n      window.addEventListener('click', onFlyoutClick);\n    }\n\n    return function () {\n      if (hasFlyout) {\n        window.removeEventListener('click', onFlyoutClick);\n      }\n    };\n  }, []);\n  React.useEffect(function () {\n    if (flyoutTarget) {\n      if (flyoutVisible) {\n        var flyoutItems = Array.from(popperRef.current.getElementsByTagName('UL')[0].children).filter(function (el) {\n          return !(el.classList.contains('pf-m-disabled') || el.classList.contains('pf-c-divider'));\n        });\n        flyoutItems[0].firstChild.focus();\n      } else {\n        flyoutTarget.focus();\n      }\n    }\n  }, [flyoutVisible, flyoutTarget]);\n  var flyoutButton = React.createElement(\"span\", {\n    className: css(styles.navToggle)\n  }, React.createElement(\"span\", {\n    className: css(styles.navToggleIcon)\n  }, React.createElement(AngleRightIcon, {\n    \"aria-hidden\": true\n  })));\n\n  var renderDefaultLink = function renderDefaultLink(context) {\n    var preventLinkDefault = preventDefault || !to;\n    return React.createElement(Component, Object.assign({\n      href: to,\n      onClick: function onClick(e) {\n        return context.onSelect(e, groupId, itemId, to, preventLinkDefault, _onClick);\n      },\n      className: css(styles.navLink, isActive && styles.modifiers.current, isHovered && styles.modifiers.hover, className),\n      \"aria-current\": isActive ? 'page' : null,\n      tabIndex: isNavOpen ? null : '-1'\n    }, props), children, flyout && flyoutButton);\n  };\n\n  var renderClonedChild = function renderClonedChild(context, child) {\n    return React.cloneElement(child, Object.assign(Object.assign({\n      onClick: function onClick(e) {\n        return context.onSelect(e, groupId, itemId, to, preventDefault, _onClick);\n      },\n      'aria-current': isActive ? 'page' : null\n    }, styleChildren && {\n      className: css(styles.navLink, isActive && styles.modifiers.current, child.props && child.props.className)\n    }), {\n      tabIndex: child.props.tabIndex || isNavOpen ? null : -1,\n      children: hasFlyout ? React.createElement(React.Fragment, null, child.props.children, flyoutButton) : child.props.children\n    }));\n  };\n\n  var ouiaProps = useOUIAProps(NavItem.displayName, ouiaId, ouiaSafe);\n\n  var handleMouseEnter = function handleMouseEnter() {\n    setIsHovered(true);\n  };\n\n  var handleMouseLeave = function handleMouseLeave() {\n    setIsHovered(false);\n  };\n\n  var flyoutPopper = React.createElement(Popper, {\n    reference: ref,\n    popper: React.createElement(\"div\", {\n      ref: popperRef,\n      onMouseEnter: handleMouseEnter,\n      onMouseLeave: handleMouseLeave\n    }, flyout),\n    placement: \"right-start\",\n    isVisible: flyoutVisible,\n    onDocumentKeyDown: handleFlyout\n  });\n  var navItem = React.createElement(React.Fragment, null, React.createElement(\"li\", Object.assign({\n    onMouseOver: onMouseOver,\n    className: css(styles.navItem, hasFlyout && styles.modifiers.flyout, className),\n    ref: ref\n  }, ouiaProps), React.createElement(NavContext.Consumer, null, function (context) {\n    return React.isValidElement(children) ? renderClonedChild(context, children) : renderDefaultLink(context);\n  })), flyout && flyoutPopper);\n  return navItem;\n};\nNavItem.displayName = 'NavItem';","map":{"version":3,"mappings":"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","names":["React","styles","css","NavContext","PageSidebarContext","useOUIAProps","Popper","AngleRightIcon","NavItem","_a","children","styleChildren","className","to","isActive","groupId","itemId","preventDefault","onClick","component","flyout","onShowFlyout","ouiaId","ouiaSafe","props","__rest","useContext","flyoutRef","setFlyoutRef","isNavOpen","useState","flyoutTarget","setFlyoutTarget","isHovered","setIsHovered","ref","useRef","flyoutVisible","popperRef","Component","hasFlyout","undefined","showFlyout","show","override","onMouseOver","event","evtContainedInFlyout","target","closest","onFlyoutClick","closestItem","handleFlyout","key","current","contains","_b","stopPropagation","useEffect","window","addEventListener","removeEventListener","flyoutItems","Array","from","getElementsByTagName","filter","el","classList","firstChild","focus","flyoutButton","navToggle","navToggleIcon","renderDefaultLink","context","preventLinkDefault","Object","href","e","onSelect","navLink","modifiers","hover","tabIndex","renderClonedChild","child","cloneElement","Fragment","ouiaProps","displayName","handleMouseEnter","handleMouseLeave","flyoutPopper","reference","popper","onMouseEnter","onMouseLeave","placement","isVisible","onDocumentKeyDown","navItem","Consumer","isValidElement"],"sources":["/home/pkorytar/Projects/RedHat/pnc-web-ui-react/node_modules/@patternfly/react-core/src/components/Nav/NavItem.tsx"],"sourcesContent":["import * as React from 'react';\nimport styles from '@patternfly/react-styles/css/components/Nav/nav';\nimport { css } from '@patternfly/react-styles';\nimport { NavContext, NavSelectClickHandler } from './Nav';\nimport { PageSidebarContext } from '../Page/PageSidebar';\nimport { useOUIAProps, OUIAProps } from '../../helpers';\nimport { Popper } from '../../helpers/Popper/Popper';\nimport AngleRightIcon from '@patternfly/react-icons/dist/esm/icons/angle-right-icon';\n\nexport interface NavItemProps extends Omit<React.HTMLProps<HTMLAnchorElement>, 'onClick'>, OUIAProps {\n  /** Content rendered inside the nav item. */\n  children?: React.ReactNode;\n  /** Whether to set className on children when React.isValidElement(children) */\n  styleChildren?: boolean;\n  /** Additional classes added to the nav item */\n  className?: string;\n  /** Target navigation link */\n  to?: string;\n  /** Flag indicating whether the item is active */\n  isActive?: boolean;\n  /** Group identifier, will be returned with the onToggle and onSelect callback passed to the Nav component */\n  groupId?: string | number | null;\n  /** Item identifier, will be returned with the onToggle and onSelect callback passed to the Nav component */\n  itemId?: string | number | null;\n  /** If true prevents the default anchor link action to occur. Set to true if you want to handle navigation yourself. */\n  preventDefault?: boolean;\n  /** Callback for item click */\n  onClick?: NavSelectClickHandler;\n  /** Component used to render NavItems if  React.isValidElement(children) is false */\n  component?: React.ReactNode;\n  /** Flyout of a nav item. This should be a Menu component. */\n  flyout?: React.ReactElement;\n  /** Callback when flyout is opened or closed */\n  onShowFlyout?: () => void;\n}\n\nexport const NavItem: React.FunctionComponent<NavItemProps> = ({\n  children,\n  styleChildren = true,\n  className,\n  to,\n  isActive = false,\n  groupId = null as string,\n  itemId = null as string,\n  preventDefault = false,\n  onClick = null as NavSelectClickHandler,\n  component = 'a',\n  flyout,\n  onShowFlyout,\n  ouiaId,\n  ouiaSafe,\n  ...props\n}: NavItemProps) => {\n  const { flyoutRef, setFlyoutRef } = React.useContext(NavContext);\n  const { isNavOpen } = React.useContext(PageSidebarContext);\n  const [flyoutTarget, setFlyoutTarget] = React.useState(null);\n  const [isHovered, setIsHovered] = React.useState(false);\n  const ref = React.useRef<HTMLLIElement>();\n  const flyoutVisible = ref === flyoutRef;\n  const popperRef = React.useRef<HTMLDivElement>();\n  const Component = component as any;\n  const hasFlyout = flyout !== undefined;\n\n  const showFlyout = (show: boolean, override?: boolean) => {\n    if ((!flyoutVisible || override) && show) {\n      setFlyoutRef(ref);\n    } else if ((flyoutVisible || override) && !show) {\n      setFlyoutRef(null);\n    }\n\n    onShowFlyout && show && onShowFlyout();\n  };\n\n  const onMouseOver = (event: React.MouseEvent) => {\n    const evtContainedInFlyout = (event.target as HTMLElement).closest('.pf-c-nav__item.pf-m-flyout');\n    if (hasFlyout && !flyoutVisible) {\n      showFlyout(true);\n    } else if (flyoutRef !== null && !evtContainedInFlyout) {\n      setFlyoutRef(null);\n    }\n  };\n\n  const onFlyoutClick = (event: MouseEvent) => {\n    const target = event.target;\n    const closestItem = (target as HTMLElement).closest('.pf-m-flyout');\n    if (!closestItem) {\n      if (hasFlyout) {\n        showFlyout(false, true);\n      } else if (flyoutRef !== null) {\n        setFlyoutRef(null);\n      }\n    }\n  };\n\n  const handleFlyout = (event: KeyboardEvent) => {\n    const key = event.key;\n    const target = event.target as HTMLElement;\n\n    if (!(popperRef?.current?.contains(target) || (hasFlyout && ref?.current?.contains(target)))) {\n      return;\n    }\n\n    if (key === ' ' || key === 'ArrowRight') {\n      event.stopPropagation();\n      event.preventDefault();\n      if (!flyoutVisible) {\n        showFlyout(true);\n        setFlyoutTarget(target as HTMLElement);\n      }\n    }\n\n    if (key === 'Escape' || key === 'ArrowLeft') {\n      if (flyoutVisible) {\n        event.stopPropagation();\n        event.preventDefault();\n        showFlyout(false);\n      }\n    }\n  };\n\n  React.useEffect(() => {\n    if (hasFlyout) {\n      window.addEventListener('click', onFlyoutClick);\n    }\n    return () => {\n      if (hasFlyout) {\n        window.removeEventListener('click', onFlyoutClick);\n      }\n    };\n  }, []);\n\n  React.useEffect(() => {\n    if (flyoutTarget) {\n      if (flyoutVisible) {\n        const flyoutItems = Array.from(\n          (popperRef.current as HTMLElement).getElementsByTagName('UL')[0].children\n        ).filter(el => !(el.classList.contains('pf-m-disabled') || el.classList.contains('pf-c-divider')));\n        (flyoutItems[0].firstChild as HTMLElement).focus();\n      } else {\n        flyoutTarget.focus();\n      }\n    }\n  }, [flyoutVisible, flyoutTarget]);\n\n  const flyoutButton = (\n    <span className={css(styles.navToggle)}>\n      <span className={css(styles.navToggleIcon)}>\n        <AngleRightIcon aria-hidden />\n      </span>\n    </span>\n  );\n\n  const renderDefaultLink = (context: any): React.ReactNode => {\n    const preventLinkDefault = preventDefault || !to;\n    return (\n      <Component\n        href={to}\n        onClick={(e: any) => context.onSelect(e, groupId, itemId, to, preventLinkDefault, onClick)}\n        className={css(\n          styles.navLink,\n          isActive && styles.modifiers.current,\n          isHovered && styles.modifiers.hover,\n          className\n        )}\n        aria-current={isActive ? 'page' : null}\n        tabIndex={isNavOpen ? null : '-1'}\n        {...props}\n      >\n        {children}\n        {flyout && flyoutButton}\n      </Component>\n    );\n  };\n\n  const renderClonedChild = (context: any, child: React.ReactElement): React.ReactNode =>\n    React.cloneElement(child, {\n      onClick: (e: MouseEvent) => context.onSelect(e, groupId, itemId, to, preventDefault, onClick),\n      'aria-current': isActive ? 'page' : null,\n      ...(styleChildren && {\n        className: css(styles.navLink, isActive && styles.modifiers.current, child.props && child.props.className)\n      }),\n      tabIndex: child.props.tabIndex || isNavOpen ? null : -1,\n      children: hasFlyout ? (\n        <React.Fragment>\n          {child.props.children}\n          {flyoutButton}\n        </React.Fragment>\n      ) : (\n        child.props.children\n      )\n    });\n\n  const ouiaProps = useOUIAProps(NavItem.displayName, ouiaId, ouiaSafe);\n\n  const handleMouseEnter = () => {\n    setIsHovered(true);\n  };\n\n  const handleMouseLeave = () => {\n    setIsHovered(false);\n  };\n\n  const flyoutPopper = (\n    <Popper\n      reference={ref}\n      popper={\n        <div ref={popperRef} onMouseEnter={handleMouseEnter} onMouseLeave={handleMouseLeave}>\n          {flyout}\n        </div>\n      }\n      placement=\"right-start\"\n      isVisible={flyoutVisible}\n      onDocumentKeyDown={handleFlyout}\n    />\n  );\n\n  const navItem = (\n    <>\n      <li\n        onMouseOver={onMouseOver}\n        className={css(styles.navItem, hasFlyout && styles.modifiers.flyout, className)}\n        ref={ref}\n        {...ouiaProps}\n      >\n        <NavContext.Consumer>\n          {context =>\n            React.isValidElement(children)\n              ? renderClonedChild(context, children as React.ReactElement)\n              : renderDefaultLink(context)\n          }\n        </NavContext.Consumer>\n      </li>\n      {flyout && flyoutPopper}\n    </>\n  );\n\n  return navItem;\n};\nNavItem.displayName = 'NavItem';\n"]},"metadata":{},"sourceType":"module"}