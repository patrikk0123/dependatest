{"ast":null,"code":"import { scopeColTransformer, emptyCol, mapProps, emptyTD, parentId } from './transformers';\nimport { selectable, cellActions, collapsible, expandedRow, editable, favoritable, sortableFavorites } from './decorators';\nimport { defaultTitle } from './formatters';\n/**\n * Generate header with transforms and formatters from custom header object.\n *\n * @param {*} header with transforms, formatters, columnTransforms, and rest of header object.\n * @param {*} title to be used as label in header config.\n * @returns {*} header, label, transforms: Array, formatters: Array.\n */\n\nconst generateHeader = (_ref, title) => {\n  let {\n    transforms: origTransforms,\n    formatters: origFormatters,\n    columnTransforms,\n    header\n  } = _ref;\n  return Object.assign(Object.assign({}, header), {\n    label: title,\n    transforms: [scopeColTransformer, emptyCol, ...(origTransforms || []), ...(columnTransforms || []), ...(header && header.hasOwnProperty('transforms') ? header.transforms : [])],\n    formatters: [...(origFormatters || []), ...(header && header.hasOwnProperty('formatters') ? header.formatters : [])]\n  });\n};\n/**\n * Function to generate cell for header config to change look of each cell.\n *\n * @param {*} customCell config with cellFormatters, cellTransforms, columnTransforms and rest of cell config.\n * @param {*} extra - extra\n * @returns {*} cell, transforms: Array, formatters: Array.\n */\n\n\nconst generateCell = (_ref2, // eslint-disable-next-line @typescript-eslint/no-unused-vars\nextra) => {\n  let {\n    cellFormatters,\n    cellTransforms,\n    columnTransforms,\n    cell\n  } = _ref2;\n  return Object.assign(Object.assign({}, cell), {\n    transforms: [...(cellTransforms || []), ...(columnTransforms || []), ...(cell && cell.hasOwnProperty('transforms') ? cell.transforms : []), mapProps // This transform should be applied last so that props that are manually defined at the cell level will override all other transforms.\n    ],\n    formatters: [defaultTitle, ...(cellFormatters || []), ...(cell && cell.hasOwnProperty('formatters') ? cell.formatters : [])]\n  });\n};\n/**\n * Function to map custom simple object properties to expected format with property, header, cell, extra params\n * and props.\n *\n * @param {*} column to be shown in header - either string or object with title, transformers and formatters (for cells as well).\n * @param {*} extra additional object with callbacks for specific formatters.\n * @param {*} key cell key to be shown in data-key.\n * @param {*} props additional props for each cell.\n * @returns {*} object with property, extraParams, header, cell and props.\n */\n\n\nconst mapHeader = function (column, extra, key) {\n  const title = column.hasOwnProperty('title') ? column.title : column;\n  let dataLabel = `column-${key}`;\n\n  if (column.hasOwnProperty('dataLabel')) {\n    dataLabel = column.dataLabel;\n  } else if (typeof title === 'string') {\n    dataLabel = title;\n  }\n\n  for (var _len = arguments.length, props = new Array(_len > 3 ? _len - 3 : 0), _key = 3; _key < _len; _key++) {\n    props[_key - 3] = arguments[_key];\n  }\n\n  return {\n    property: typeof title === 'string' && title.toLowerCase().trim().replace(/\\s/g, '-') || `column-${key}`,\n    extraParams: extra,\n    data: column.data,\n    header: generateHeader(column, title),\n    cell: generateCell(column, extra),\n    props: Object.assign(Object.assign({\n      'data-label': dataLabel,\n      'data-key': key\n    }, column.hasOwnProperty('props') ? column.props : {}), props)\n  };\n};\n/**\n * Function to define select cell in first column.\n *\n * @param {*} extraObject with onSelect callback.\n * @returns {*} object with empty title, tranforms - Array, cellTransforms - Array.\n */\n\n\nconst selectableTransforms = _ref3 => {\n  let {\n    onSelect,\n    canSelectAll\n  } = _ref3;\n  return [...(onSelect ? [{\n    title: '',\n    transforms: canSelectAll && [selectable] || null,\n    cellTransforms: [selectable]\n  }] : [])];\n};\n/**\n * Function to define favorites cell in first column (or second column if rows are also selectable).\n *\n * @param {*} extraObject with onFavorite callback.\n * @returns {*} object with empty title, tranforms - Array, cellTransforms - Array.\n */\n\n\nconst favoritesTransforms = _ref4 => {\n  let {\n    onFavorite,\n    onSort,\n    sortBy,\n    canSortFavorites,\n    firstUserColumnIndex\n  } = _ref4;\n  return [...(onFavorite ? [{\n    title: '',\n    transforms: onSort && canSortFavorites ? [sortableFavorites({\n      onSort,\n      // favorites should be just before the first user-defined column\n      columnIndex: firstUserColumnIndex - 1,\n      sortBy\n    })] : [emptyTD],\n    cellTransforms: [favoritable]\n  }] : [])];\n};\n/**\n * Function to define actions in last column.\n *\n * @param {*} extraObject with actions array.\n * @returns {*} object with empty title, tranforms - Array, cellTransforms - Array.\n */\n\n\nconst actionsTransforms = _ref5 => {\n  let {\n    actions,\n    actionResolver,\n    areActionsDisabled\n  } = _ref5;\n  return [...(actionResolver || actions ? [{\n    title: '',\n    transforms: [emptyTD],\n    cellTransforms: [cellActions(actions, actionResolver, areActionsDisabled)]\n  }] : [])];\n};\n/**\n * Function to define collapsible in first column.\n *\n * @param {*} header info with cellTransforms.\n * @param {*}  extraObject with onCollapse callback.\n * @returns {*} object with empty title, tranforms - Array, cellTransforms - Array.\n */\n\n\nconst collapsibleTransforms = (header, _ref6) => {\n  let {\n    onCollapse,\n    canCollapseAll\n  } = _ref6;\n  return [...(onCollapse ? [{\n    title: '',\n    transforms: canCollapseAll && [collapsible] || null,\n    cellTransforms: [collapsible, expandedRow(header.length)]\n  }] : [])];\n};\n/**\n * Function to add additional cell transforms to object.\n *\n * @param {*} cell to be expanded.\n * @param {*} additional thing to be added to cellTransforms.\n * @returns {*} object with title from cell and cellTransforms with additional in.\n */\n\n\nconst addAdditionalCellTranforms = (cell, additional) => Object.assign(Object.assign({}, cell.hasOwnProperty('title') ? cell : {\n  title: cell\n}), {\n  cellTransforms: [...(cell.hasOwnProperty('cellTransforms') ? cell.cellTransforms : []), additional]\n});\n/**\n * Function to change expanded row with additional transforms.\n *\n * @param {*} header info with cellTransforms.\n * @param {*} extra object with onCollapse/onExpand function.\n */\n\n\nconst expandContent = (header, extra) => {\n  if (!extra.onCollapse && !extra.onExpand) {\n    return header;\n  }\n\n  return header.map(cell => {\n    const parentIdCell = addAdditionalCellTranforms(cell, parentId);\n    return addAdditionalCellTranforms(parentIdCell, expandedRow(header.length));\n  });\n};\n/**\n * Function to join parent and their children so they can be rendered in tbody.\n *\n * @param {*} rows raw data to find out if it's child or parent.\n * @param {*} children data to render (array of react children).\n */\n\n\nexport const mapOpenedRows = (rows, children) => rows.reduce((acc, curr, key) => {\n  if (curr.hasOwnProperty('parent')) {\n    const parent = acc.length > 0 && acc[acc.length - 1];\n\n    if (parent) {\n      acc[acc.length - 1].rows = [...acc[acc.length - 1].rows, children[key]];\n\n      if (curr.hasOwnProperty('compoundParent')) {\n        // if this is compound expand, check for any open child cell\n        acc[acc.length - 1].isOpen = acc[acc.length - 1].rows.some(oneRow => oneRow.props.rowData.cells.some(oneCell => oneCell.props && oneCell.props.isOpen));\n      }\n    }\n  } else {\n    acc = [...acc, Object.assign(Object.assign({}, curr), {\n      rows: [children[key]]\n    })];\n  }\n\n  return acc;\n}, []);\n\nconst rowEditTransforms = _ref7 => {\n  let {\n    onRowEdit\n  } = _ref7;\n  return [...(onRowEdit ? [{\n    title: '',\n    cellTransforms: [editable]\n  }] : [])];\n};\n/**\n * Function to calculate columns based on custom config.\n * It adds some custom cells for collapse, select, if expanded row and actions.\n *\n * @param {*} headerRows custom object with described table header cells.\n * @param {*} extra object with custom callbacks.\n * @returns {*} expected object for react tabular table.\n */\n\n\nexport const calculateColumns = (headerRows, extra) => headerRows && [...collapsibleTransforms(headerRows, extra), ...selectableTransforms(extra), ...favoritesTransforms(extra), ...expandContent(headerRows, extra), ...rowEditTransforms(extra), ...actionsTransforms(extra)].map((oneCol, key) => Object.assign({}, mapHeader(oneCol, extra, key)));","map":{"version":3,"mappings":"AAAA,SAASA,mBAAT,EAA8BC,QAA9B,EAAwCC,QAAxC,EAAkDC,OAAlD,EAA2DC,QAA3D,QAA2E,gBAA3E;AACA,SACEC,UADF,EAEEC,WAFF,EAGEC,WAHF,EAIEC,WAJF,EAKEC,QALF,EAMEC,WANF,EAOEC,iBAPF,QAQO,cARP;AASA,SAASC,YAAT,QAA6B,cAA7B;AAeA;;;;;;;;AAOA,MAAMC,cAAc,GAAG,OAErBC,KAFqB;EAAA,IACrB;IAAEC,UAAU,EAAEC,cAAd;IAA8BC,UAAU,EAAEC,cAA1C;IAA0DC,gBAA1D;IAA4EC;EAA5E,CADqB;EAAA,OAGlBC,gCACAD,MADA,GACM;IACTE,KAAK,EAAER,KADE;IAETC,UAAU,EAAE,CACVf,mBADU,EAEVC,QAFU,EAGV,IAAIe,cAAc,IAAI,EAAtB,CAHU,EAIV,IAAIG,gBAAgB,IAAI,EAAxB,CAJU,EAKV,IAAIC,MAAM,IAAIA,MAAM,CAACG,cAAP,CAAsB,YAAtB,CAAV,GAAgDH,MAAM,CAACL,UAAvD,GAAoE,EAAxE,CALU,CAFH;IASTE,UAAU,EAAE,CAAC,IAAIC,cAAc,IAAI,EAAtB,CAAD,EAA4B,IAAIE,MAAM,IAAIA,MAAM,CAACG,cAAP,CAAsB,YAAtB,CAAV,GAAgDH,MAAM,CAACH,UAAvD,GAAoE,EAAxE,CAA5B;EATH,CADN,CAHkB;AAAA,CAAvB;AAuBA;;;;;;;;;AAOA,MAAMO,YAAY,GAAG,QAEnB;AACAC,KAHmB;EAAA,IACnB;IAAEC,cAAF;IAAkBC,cAAlB;IAAkCR,gBAAlC;IAAoDS;EAApD,CADmB;EAAA,OAIhBP,gCACAO,IADA,GACI;IACPb,UAAU,EAAE,CACV,IAAIY,cAAc,IAAI,EAAtB,CADU,EAEV,IAAIR,gBAAgB,IAAI,EAAxB,CAFU,EAGV,IAAIS,IAAI,IAAIA,IAAI,CAACL,cAAL,CAAoB,YAApB,CAAR,GAA4CK,IAAI,CAACb,UAAjD,GAA8D,EAAlE,CAHU,EAIVb,QAJU,CAID;IAJC,CADL;IAOPe,UAAU,EAAE,CACVL,YADU,EAEV,IAAIc,cAAc,IAAI,EAAtB,CAFU,EAGV,IAAIE,IAAI,IAAIA,IAAI,CAACL,cAAL,CAAoB,YAApB,CAAR,GAA4CK,IAAI,CAACX,UAAjD,GAA8D,EAAlE,CAHU;EAPL,CADJ,CAJgB;AAAA,CAArB;AAmBA;;;;;;;;;;;;AAUA,MAAMY,SAAS,GAAG,UAACC,MAAD,EAAgBL,KAAhB,EAA4BM,GAA5B,EAA0D;EAC1E,MAAMjB,KAAK,GAAIgB,MAAM,CAACP,cAAP,CAAsB,OAAtB,IAAiCO,MAAM,CAAChB,KAAxC,GAAgDgB,MAA/D;EACA,IAAIE,SAAS,GAAmB,UAAUD,GAAG,EAA7C;;EACA,IAAID,MAAM,CAACP,cAAP,CAAsB,WAAtB,CAAJ,EAAwC;IACtCS,SAAS,GAAGF,MAAM,CAACE,SAAnB;EACD,CAFD,MAEO,IAAI,OAAOlB,KAAP,KAAiB,QAArB,EAA+B;IACpCkB,SAAS,GAAGlB,KAAZ;EACD;;EAPyE,kCAAdmB,KAAc;IAAdA,KAAc;EAAA;;EAS1E,OAAO;IACLC,QAAQ,EACL,OAAOpB,KAAP,KAAiB,QAAjB,IACCA,KAAK,CACFqB,WADH,GAEGC,IAFH,GAGGC,OAHH,CAGW,KAHX,EAGkB,GAHlB,CADF,IAKA,UAAUN,GAAG,EAPV;IAQLO,WAAW,EAAEb,KARR;IASLc,IAAI,EAAET,MAAM,CAACS,IATR;IAULnB,MAAM,EAAEP,cAAc,CAACiB,MAAD,EAAShB,KAAT,CAVjB;IAWLc,IAAI,EAAEJ,YAAY,CAACM,MAAD,EAASL,KAAT,CAXb;IAYLQ,KAAK;MACH,cAAcD,SADX;MAEH,YAAYD;IAFT,GAGCD,MAAM,CAACP,cAAP,CAAsB,OAAtB,IAAiCO,MAAM,CAACG,KAAxC,GAAgD,EAHjD,GAIAA,KAJA;EAZA,CAAP;AAmBD,CA5BD;AAmCA;;;;;;;;AAMA,MAAMO,oBAAoB,GAAG;EAAA,IAAC;IAAEC,QAAF;IAAYC;EAAZ,CAAD;EAAA,OAAkD,CAC7E,IAAID,QAAQ,GACR,CACE;IACE3B,KAAK,EAAE,EADT;IAEEC,UAAU,EAAG2B,YAAY,IAAI,CAACrC,UAAD,CAAjB,IAAkC,IAFhD;IAGEsB,cAAc,EAAE,CAACtB,UAAD;EAHlB,CADF,CADQ,GAQR,EARJ,CAD6E,CAAlD;AAAA,CAA7B;AAYA;;;;;;;;AAMA,MAAMsC,mBAAmB,GAAG;EAAA,IAAC;IAC3BC,UAD2B;IAE3BC,MAF2B;IAG3BC,MAH2B;IAI3BC,gBAJ2B;IAK3BC;EAL2B,CAAD;EAAA,OAYjB,CACT,IAAIJ,UAAU,GACV,CACE;IACE9B,KAAK,EAAE,EADT;IAEEC,UAAU,EACR8B,MAAM,IAAIE,gBAAV,GACI,CACEpC,iBAAiB,CAAC;MAChBkC,MADgB;MAEhB;MACAI,WAAW,EAAED,oBAAoB,GAAG,CAHpB;MAIhBF;IAJgB,CAAD,CADnB,CADJ,GASI,CAAC3C,OAAD,CAZR;IAaEwB,cAAc,EAAE,CAACjB,WAAD;EAblB,CADF,CADU,GAkBV,EAlBJ,CADS,CAZiB;AAAA,CAA5B;AAkCA;;;;;;;;AAMA,MAAMwC,iBAAiB,GAAG;EAAA,IAAC;IACzBC,OADyB;IAEzBC,cAFyB;IAGzBC;EAHyB,CAAD;EAAA,OAQpB,CACJ,IAAID,cAAc,IAAID,OAAlB,GACA,CACE;IACErC,KAAK,EAAE,EADT;IAEEC,UAAU,EAAE,CAACZ,OAAD,CAFd;IAGEwB,cAAc,EAAE,CAACrB,WAAW,CAAC6C,OAAD,EAAUC,cAAV,EAA0BC,kBAA1B,CAAZ;EAHlB,CADF,CADA,GAQA,EARJ,CADI,CARoB;AAAA,CAA1B;AAyBA;;;;;;;;;AAOA,MAAMC,qBAAqB,GAAG,CAAClC,MAAD;EAAA,IAA6B;IAAEmC,UAAF;IAAcC;EAAd,CAA7B;EAAA,OAAmF,CAC/G,IAAID,UAAU,GACV,CACE;IACEzC,KAAK,EAAE,EADT;IAEEC,UAAU,EAAGyC,cAAc,IAAI,CAACjD,WAAD,CAAnB,IAAqC,IAFnD;IAGEoB,cAAc,EAAE,CAACpB,WAAD,EAAcC,WAAW,CAACY,MAAM,CAACqC,MAAR,CAAzB;EAHlB,CADF,CADU,GAQV,EARJ,CAD+G,CAAnF;AAAA,CAA9B;AAYA;;;;;;;;;AAOA,MAAMC,0BAA0B,GAAG,CAAC9B,IAAD,EAAc+B,UAAd,KAAkCtC,gCAC/DO,IAAI,CAACL,cAAL,CAAoB,OAApB,IAA+BK,IAA/B,GAAsC;EAAEd,KAAK,EAAEc;AAAT,CADyB,GACT;EAC1DD,cAAc,EAAE,CAAC,IAAIC,IAAI,CAACL,cAAL,CAAoB,gBAApB,IAAwCK,IAAI,CAACD,cAA7C,GAA8D,EAAlE,CAAD,EAAwEgC,UAAxE;AAD0C,CADS,CAArE;AAKA;;;;;;;;AAMA,MAAMC,aAAa,GAAG,CAACxC,MAAD,EAA6BK,KAA7B,KAA2C;EAC/D,IAAI,CAACA,KAAK,CAAC8B,UAAP,IAAqB,CAAC9B,KAAK,CAACoC,QAAhC,EAA0C;IACxC,OAAOzC,MAAP;EACD;;EACD,OAAOA,MAAM,CAAC0C,GAAP,CAAYlC,IAAD,IAAyB;IACzC,MAAMmC,YAAY,GAAGL,0BAA0B,CAAC9B,IAAD,EAAgBxB,QAAhB,CAA/C;IACA,OAAOsD,0BAA0B,CAACK,YAAD,EAAwBvD,WAAW,CAACY,MAAM,CAACqC,MAAR,CAAnC,CAAjC;EACD,CAHM,CAAP;AAID,CARD;AAUA;;;;;;;;AAMA,OAAO,MAAMO,aAAa,GAAG,CAACC,IAAD,EAAeC,QAAf,KAC3BD,IAAI,CAACE,MAAL,CAAY,CAACC,GAAD,EAAWC,IAAX,EAAiBtC,GAAjB,KAAwB;EAClC,IAAIsC,IAAI,CAAC9C,cAAL,CAAoB,QAApB,CAAJ,EAAmC;IACjC,MAAM+C,MAAM,GAAGF,GAAG,CAACX,MAAJ,GAAa,CAAb,IAAkBW,GAAG,CAACA,GAAG,CAACX,MAAJ,GAAa,CAAd,CAApC;;IACA,IAAIa,MAAJ,EAAY;MACVF,GAAG,CAACA,GAAG,CAACX,MAAJ,GAAa,CAAd,CAAH,CAAoBQ,IAApB,GAA2B,CAAC,GAAGG,GAAG,CAACA,GAAG,CAACX,MAAJ,GAAa,CAAd,CAAH,CAAoBQ,IAAxB,EAA8BC,QAAQ,CAACnC,GAAD,CAAtC,CAA3B;;MACA,IAAIsC,IAAI,CAAC9C,cAAL,CAAoB,gBAApB,CAAJ,EAA2C;QACzC;QACA6C,GAAG,CAACA,GAAG,CAACX,MAAJ,GAAa,CAAd,CAAH,CAAoBc,MAApB,GAA6BH,GAAG,CAACA,GAAG,CAACX,MAAJ,GAAa,CAAd,CAAH,CAAoBQ,IAApB,CAAyBO,IAAzB,CAA+BC,MAAD,IACzDA,MAAM,CAACxC,KAAP,CAAayC,OAAb,CAAqBC,KAArB,CAA2BH,IAA3B,CAAiCI,OAAD,IAAoBA,OAAO,CAAC3C,KAAR,IAAiB2C,OAAO,CAAC3C,KAAR,CAAcsC,MAAnF,CAD2B,CAA7B;MAGD;IACF;EACF,CAXD,MAWO;IACLH,GAAG,GAAG,CAAC,GAAGA,GAAJ,EAAO/C,gCAAOgD,IAAP,GAAW;MAAEJ,IAAI,EAAE,CAACC,QAAQ,CAACnC,GAAD,CAAT;IAAR,CAAX,CAAP,CAAN;EACD;;EACD,OAAOqC,GAAP;AACD,CAhBD,EAgBG,EAhBH,CADK;;AAmBP,MAAMS,iBAAiB,GAAG;EAAA,IAAC;IAAEC;EAAF,CAAD;EAAA,OAA6C,CACrE,IAAIA,SAAS,GACT,CACE;IACEhE,KAAK,EAAE,EADT;IAEEa,cAAc,EAAE,CAAClB,QAAD;EAFlB,CADF,CADS,GAOT,EAPJ,CADqE,CAA7C;AAAA,CAA1B;AAWA;;;;;;;;;;AAQA,OAAO,MAAMsE,gBAAgB,GAAG,CAACC,UAAD,EAAiCvD,KAAjC,KAC9BuD,UAAU,IACV,CACE,GAAG1B,qBAAqB,CAAC0B,UAAD,EAAavD,KAAb,CAD1B,EAEE,GAAGe,oBAAoB,CAACf,KAAD,CAFzB,EAGE,GAAGkB,mBAAmB,CAAClB,KAAD,CAHxB,EAIE,GAAGmC,aAAa,CAACoB,UAAD,EAAavD,KAAb,CAJlB,EAKE,GAAGoD,iBAAiB,CAACpD,KAAD,CALtB,EAME,GAAGyB,iBAAiB,CAACzB,KAAD,CANtB,EAOEqC,GAPF,CAOM,CAACmB,MAAD,EAASlD,GAAT,KAAiBV,kBAClBQ,SAAS,CAACoD,MAAD,EAAkBxD,KAAlB,EAAyBM,GAAzB,CADS,CAPvB,CAFK","names":["scopeColTransformer","emptyCol","mapProps","emptyTD","parentId","selectable","cellActions","collapsible","expandedRow","editable","favoritable","sortableFavorites","defaultTitle","generateHeader","title","transforms","origTransforms","formatters","origFormatters","columnTransforms","header","Object","label","hasOwnProperty","generateCell","extra","cellFormatters","cellTransforms","cell","mapHeader","column","key","dataLabel","props","property","toLowerCase","trim","replace","extraParams","data","selectableTransforms","onSelect","canSelectAll","favoritesTransforms","onFavorite","onSort","sortBy","canSortFavorites","firstUserColumnIndex","columnIndex","actionsTransforms","actions","actionResolver","areActionsDisabled","collapsibleTransforms","onCollapse","canCollapseAll","length","addAdditionalCellTranforms","additional","expandContent","onExpand","map","parentIdCell","mapOpenedRows","rows","children","reduce","acc","curr","parent","isOpen","some","oneRow","rowData","cells","oneCell","rowEditTransforms","onRowEdit","calculateColumns","headerRows","oneCol"],"sources":["/home/pkorytar/Projects/RedHat/pnc-web-ui-react/node_modules/@patternfly/react-table/src/components/Table/utils/headerUtils.tsx"],"sourcesContent":["import { scopeColTransformer, emptyCol, mapProps, emptyTD, parentId } from './transformers';\nimport {\n  selectable,\n  cellActions,\n  collapsible,\n  expandedRow,\n  editable,\n  favoritable,\n  sortableFavorites\n} from './decorators';\nimport { defaultTitle } from './formatters';\nimport {\n  ICell,\n  IRow,\n  IActions,\n  IActionsResolver,\n  IAreActionsDisabled,\n  OnSelect,\n  OnCollapse,\n  OnRowEdit,\n  OnFavorite,\n  OnSort,\n  ISortBy\n} from '../TableTypes';\n\n/**\n * Generate header with transforms and formatters from custom header object.\n *\n * @param {*} header with transforms, formatters, columnTransforms, and rest of header object.\n * @param {*} title to be used as label in header config.\n * @returns {*} header, label, transforms: Array, formatters: Array.\n */\nconst generateHeader = (\n  { transforms: origTransforms, formatters: origFormatters, columnTransforms, header }: ICell,\n  title?: string | ICell\n) => ({\n  ...header,\n  label: title,\n  transforms: [\n    scopeColTransformer,\n    emptyCol,\n    ...(origTransforms || []),\n    ...(columnTransforms || []),\n    ...(header && header.hasOwnProperty('transforms') ? header.transforms : [])\n  ],\n  formatters: [...(origFormatters || []), ...(header && header.hasOwnProperty('formatters') ? header.formatters : [])]\n});\n\ninterface ICustomCell {\n  cellFormatters?: ICell['cellFormatters'];\n  cellTransforms?: ICell['cellTransforms'];\n  columnTransforms?: ICell['columnTransforms'];\n  cell?: ICell;\n}\n\n/**\n * Function to generate cell for header config to change look of each cell.\n *\n * @param {*} customCell config with cellFormatters, cellTransforms, columnTransforms and rest of cell config.\n * @param {*} extra - extra\n * @returns {*} cell, transforms: Array, formatters: Array.\n */\nconst generateCell = (\n  { cellFormatters, cellTransforms, columnTransforms, cell }: ICustomCell,\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  extra: any\n) => ({\n  ...cell,\n  transforms: [\n    ...(cellTransforms || []),\n    ...(columnTransforms || []),\n    ...(cell && cell.hasOwnProperty('transforms') ? cell.transforms : []),\n    mapProps // This transform should be applied last so that props that are manually defined at the cell level will override all other transforms.\n  ],\n  formatters: [\n    defaultTitle,\n    ...(cellFormatters || []),\n    ...(cell && cell.hasOwnProperty('formatters') ? cell.formatters : [])\n  ]\n});\n\n/**\n * Function to map custom simple object properties to expected format with property, header, cell, extra params\n * and props.\n *\n * @param {*} column to be shown in header - either string or object with title, transformers and formatters (for cells as well).\n * @param {*} extra additional object with callbacks for specific formatters.\n * @param {*} key cell key to be shown in data-key.\n * @param {*} props additional props for each cell.\n * @returns {*} object with property, extraParams, header, cell and props.\n */\nconst mapHeader = (column: ICell, extra: any, key: number, ...props: any) => {\n  const title = (column.hasOwnProperty('title') ? column.title : column) as string | ICell;\n  let dataLabel: string | ICell = `column-${key}`;\n  if (column.hasOwnProperty('dataLabel')) {\n    dataLabel = column.dataLabel;\n  } else if (typeof title === 'string') {\n    dataLabel = title;\n  }\n\n  return {\n    property:\n      (typeof title === 'string' &&\n        title\n          .toLowerCase()\n          .trim()\n          .replace(/\\s/g, '-')) ||\n      `column-${key}`,\n    extraParams: extra,\n    data: column.data,\n    header: generateHeader(column, title),\n    cell: generateCell(column, extra),\n    props: {\n      'data-label': dataLabel,\n      'data-key': key,\n      ...(column.hasOwnProperty('props') ? column.props : {}),\n      ...props\n    }\n  };\n};\n\nexport interface ISelectTransform {\n  onSelect: OnSelect;\n  canSelectAll: boolean;\n}\n\n/**\n * Function to define select cell in first column.\n *\n * @param {*} extraObject with onSelect callback.\n * @returns {*} object with empty title, tranforms - Array, cellTransforms - Array.\n */\nconst selectableTransforms = ({ onSelect, canSelectAll }: ISelectTransform) => [\n  ...(onSelect\n    ? [\n        {\n          title: '',\n          transforms: (canSelectAll && [selectable]) || null,\n          cellTransforms: [selectable]\n        }\n      ]\n    : [])\n];\n\n/**\n * Function to define favorites cell in first column (or second column if rows are also selectable).\n *\n * @param {*} extraObject with onFavorite callback.\n * @returns {*} object with empty title, tranforms - Array, cellTransforms - Array.\n */\nconst favoritesTransforms = ({\n  onFavorite,\n  onSort,\n  sortBy,\n  canSortFavorites,\n  firstUserColumnIndex\n}: {\n  onFavorite: OnFavorite;\n  onSort: OnSort;\n  sortBy: ISortBy;\n  canSortFavorites: boolean;\n  firstUserColumnIndex: number;\n}): any => [\n  ...(onFavorite\n    ? [\n        {\n          title: '',\n          transforms:\n            onSort && canSortFavorites\n              ? [\n                  sortableFavorites({\n                    onSort,\n                    // favorites should be just before the first user-defined column\n                    columnIndex: firstUserColumnIndex - 1,\n                    sortBy\n                  })\n                ]\n              : [emptyTD],\n          cellTransforms: [favoritable]\n        }\n      ]\n    : [])\n];\n\n/**\n * Function to define actions in last column.\n *\n * @param {*} extraObject with actions array.\n * @returns {*} object with empty title, tranforms - Array, cellTransforms - Array.\n */\nconst actionsTransforms = ({\n  actions,\n  actionResolver,\n  areActionsDisabled\n}: {\n  actions: IActions;\n  actionResolver: IActionsResolver;\n  areActionsDisabled: IAreActionsDisabled;\n}) => [\n  ...(actionResolver || actions\n    ? [\n        {\n          title: '',\n          transforms: [emptyTD],\n          cellTransforms: [cellActions(actions, actionResolver, areActionsDisabled)]\n        }\n      ]\n    : [])\n];\n\nexport interface ICollapseTranform {\n  onCollapse: OnCollapse;\n  canCollapseAll: boolean;\n}\n\n/**\n * Function to define collapsible in first column.\n *\n * @param {*} header info with cellTransforms.\n * @param {*}  extraObject with onCollapse callback.\n * @returns {*} object with empty title, tranforms - Array, cellTransforms - Array.\n */\nconst collapsibleTransforms = (header: (ICell | string)[], { onCollapse, canCollapseAll }: ICollapseTranform) => [\n  ...(onCollapse\n    ? [\n        {\n          title: '',\n          transforms: (canCollapseAll && [collapsible]) || null,\n          cellTransforms: [collapsible, expandedRow(header.length)]\n        }\n      ]\n    : [])\n];\n\n/**\n * Function to add additional cell transforms to object.\n *\n * @param {*} cell to be expanded.\n * @param {*} additional thing to be added to cellTransforms.\n * @returns {*} object with title from cell and cellTransforms with additional in.\n */\nconst addAdditionalCellTranforms = (cell: ICell, additional: any) => ({\n  ...(cell.hasOwnProperty('title') ? cell : { title: cell }),\n  cellTransforms: [...(cell.hasOwnProperty('cellTransforms') ? cell.cellTransforms : []), additional]\n});\n\n/**\n * Function to change expanded row with additional transforms.\n *\n * @param {*} header info with cellTransforms.\n * @param {*} extra object with onCollapse/onExpand function.\n */\nconst expandContent = (header: (ICell | string)[], extra: any) => {\n  if (!extra.onCollapse && !extra.onExpand) {\n    return header;\n  }\n  return header.map((cell: ICell | string) => {\n    const parentIdCell = addAdditionalCellTranforms(cell as ICell, parentId);\n    return addAdditionalCellTranforms(parentIdCell as ICell, expandedRow(header.length));\n  });\n};\n\n/**\n * Function to join parent and their children so they can be rendered in tbody.\n *\n * @param {*} rows raw data to find out if it's child or parent.\n * @param {*} children data to render (array of react children).\n */\nexport const mapOpenedRows = (rows: IRow[], children: any) =>\n  rows.reduce((acc: any, curr, key) => {\n    if (curr.hasOwnProperty('parent')) {\n      const parent = acc.length > 0 && acc[acc.length - 1];\n      if (parent) {\n        acc[acc.length - 1].rows = [...acc[acc.length - 1].rows, children[key]];\n        if (curr.hasOwnProperty('compoundParent')) {\n          // if this is compound expand, check for any open child cell\n          acc[acc.length - 1].isOpen = acc[acc.length - 1].rows.some((oneRow: IRow) =>\n            oneRow.props.rowData.cells.some((oneCell: ICell) => oneCell.props && oneCell.props.isOpen)\n          );\n        }\n      }\n    } else {\n      acc = [...acc, { ...curr, rows: [children[key]] }];\n    }\n    return acc;\n  }, []) as IRow[];\n\nconst rowEditTransforms = ({ onRowEdit }: { onRowEdit: OnRowEdit }) => [\n  ...(onRowEdit\n    ? [\n        {\n          title: '',\n          cellTransforms: [editable]\n        }\n      ]\n    : [])\n];\n\n/**\n * Function to calculate columns based on custom config.\n * It adds some custom cells for collapse, select, if expanded row and actions.\n *\n * @param {*} headerRows custom object with described table header cells.\n * @param {*} extra object with custom callbacks.\n * @returns {*} expected object for react tabular table.\n */\nexport const calculateColumns = (headerRows: (ICell | string)[], extra: any) =>\n  headerRows &&\n  [\n    ...collapsibleTransforms(headerRows, extra),\n    ...selectableTransforms(extra),\n    ...favoritesTransforms(extra),\n    ...expandContent(headerRows, extra),\n    ...rowEditTransforms(extra),\n    ...actionsTransforms(extra)\n  ].map((oneCol, key) => ({\n    ...mapHeader(oneCol as ICell, extra, key)\n  }));\n"]},"metadata":{},"sourceType":"module"}