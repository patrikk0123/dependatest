{"ast":null,"code":"import { __rest } from \"tslib\";\nimport * as React from 'react';\nimport { css } from '@patternfly/react-styles';\nimport { KEY_CODES } from '../../helpers/constants';\nimport styles from '@patternfly/react-styles/css/components/OptionsMenu/options-menu';\nexport const OptionsMenuToggleWithText = _a => {\n  var {\n    parentId = '',\n    toggleText,\n    toggleTextClassName = '',\n    toggleButtonContents,\n    toggleButtonContentsClassName = '',\n    onToggle = () => null,\n    isOpen = false,\n    isPlain = false,\n\n    /* eslint-disable @typescript-eslint/no-unused-vars */\n    isText = true,\n    isDisabled = false,\n\n    /* eslint-disable @typescript-eslint/no-unused-vars */\n    isActive = false,\n    'aria-haspopup': ariaHasPopup,\n    parentRef,\n\n    /* eslint-disable @typescript-eslint/no-unused-vars */\n    getMenuRef,\n    onEnter,\n\n    /* eslint-enable @typescript-eslint/no-unused-vars */\n    'aria-label': ariaLabel = 'Options menu'\n  } = _a,\n      props = __rest(_a, [\"parentId\", \"toggleText\", \"toggleTextClassName\", \"toggleButtonContents\", \"toggleButtonContentsClassName\", \"onToggle\", \"isOpen\", \"isPlain\", \"isText\", \"isDisabled\", \"isActive\", 'aria-haspopup', \"parentRef\", \"getMenuRef\", \"onEnter\", 'aria-label']);\n\n  const buttonRef = React.useRef();\n  React.useEffect(() => {\n    document.addEventListener('mousedown', onDocClick);\n    document.addEventListener('touchstart', onDocClick);\n    document.addEventListener('keydown', onEscPress);\n    return () => {\n      document.removeEventListener('mousedown', onDocClick);\n      document.removeEventListener('touchstart', onDocClick);\n      document.removeEventListener('keydown', onEscPress);\n    };\n  });\n\n  const onDocClick = event => {\n    if (isOpen && parentRef && parentRef.current && !parentRef.current.contains(event.target)) {\n      onToggle(false);\n      buttonRef.current.focus();\n    }\n  };\n\n  const onKeyDown = event => {\n    if (event.key === 'Tab' && !isOpen) {\n      return;\n    }\n\n    event.preventDefault();\n\n    if ((event.key === 'Enter' || event.key === ' ') && isOpen) {\n      onToggle(!isOpen);\n    } else if ((event.key === 'Enter' || event.key === ' ') && !isOpen) {\n      onToggle(!isOpen);\n      onEnter(event);\n    }\n  };\n\n  const onEscPress = event => {\n    const keyCode = event.keyCode || event.which;\n\n    if (isOpen && (keyCode === KEY_CODES.ESCAPE_KEY || event.key === 'Tab') && parentRef && parentRef.current && parentRef.current.contains(event.target)) {\n      onToggle(false);\n      buttonRef.current.focus();\n    }\n  };\n\n  return React.createElement(\"div\", Object.assign({\n    className: css(styles.optionsMenuToggle, styles.modifiers.text, isPlain && styles.modifiers.plain, isDisabled && styles.modifiers.disabled, isActive && styles.modifiers.active)\n  }, props), React.createElement(\"span\", {\n    className: css(styles.optionsMenuToggleText, toggleTextClassName)\n  }, toggleText), React.createElement(\"button\", {\n    className: css(styles.optionsMenuToggleButton, toggleButtonContentsClassName),\n    id: `${parentId}-toggle`,\n    \"aria-haspopup\": \"listbox\",\n    \"aria-label\": ariaLabel,\n    \"aria-expanded\": isOpen,\n    ref: buttonRef,\n    disabled: isDisabled,\n    onClick: () => onToggle(!isOpen),\n    onKeyDown: onKeyDown\n  }, React.createElement(\"span\", {\n    className: css(styles.optionsMenuToggleButtonIcon)\n  }, toggleButtonContents)));\n};\nOptionsMenuToggleWithText.displayName = 'OptionsMenuToggleWithText';","map":{"version":3,"mappings":"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","names":["React","css","KEY_CODES","styles","OptionsMenuToggleWithText","_a","parentId","toggleText","toggleTextClassName","toggleButtonContents","toggleButtonContentsClassName","onToggle","isOpen","isPlain","isText","isDisabled","isActive","ariaHasPopup","parentRef","getMenuRef","onEnter","ariaLabel","props","buttonRef","useRef","useEffect","document","addEventListener","onDocClick","onEscPress","removeEventListener","event","current","contains","target","focus","onKeyDown","key","preventDefault","keyCode","which","ESCAPE_KEY","className","optionsMenuToggle","modifiers","text","plain","disabled","active","optionsMenuToggleText","optionsMenuToggleButton","id","ref","onClick","optionsMenuToggleButtonIcon","displayName"],"sources":["/home/pkorytar/Projects/RedHat/pnc-web-ui-react/node_modules/@patternfly/react-core/src/components/OptionsMenu/OptionsMenuToggleWithText.tsx"],"sourcesContent":["import * as React from 'react';\nimport { css } from '@patternfly/react-styles';\nimport { KEY_CODES } from '../../helpers/constants';\nimport styles from '@patternfly/react-styles/css/components/OptionsMenu/options-menu';\n\nexport interface OptionsMenuToggleWithTextProps extends React.HTMLProps<HTMLDivElement> {\n  /** Id of the parent options menu component */\n  parentId?: string;\n  /** Content to be rendered inside the options menu toggle as text or another non-interactive element */\n  toggleText: React.ReactNode;\n  /** classes to be added to the options menu toggle text */\n  toggleTextClassName?: string;\n  /** Content to be rendered inside the options menu toggle button */\n  toggleButtonContents?: React.ReactNode;\n  /** Classes to be added to the options menu toggle button */\n  toggleButtonContentsClassName?: string;\n  /** Callback for when this options menu is toggled */\n  onToggle?: (event: boolean) => void;\n  /** Inner function to indicate open on Enter */\n  onEnter?: (event: React.MouseEvent<HTMLButtonElement> | React.KeyboardEvent<Element>) => void;\n  /** Flag to indicate if menu is open */\n  isOpen?: boolean;\n  /** Flag to indicate if the button is plain */\n  isPlain?: boolean;\n  /** Forces display of the active state of the options menu button */\n  isActive?: boolean;\n  /** Disables the options menu toggle */\n  isDisabled?: boolean;\n  /** @hide Internal parent reference */\n  parentRef?: React.RefObject<HTMLElement>;\n  /** Indicates that the element has a popup context menu or sub-level menu */\n  'aria-haspopup'?: boolean | 'dialog' | 'menu' | 'listbox' | 'tree' | 'grid';\n  /** Provides an accessible name for the button when an icon is used instead of text */\n  'aria-label'?: string;\n  /** @hide Display the toggle in text only mode. */\n  isText?: boolean;\n  /** @hide The menu element */\n  getMenuRef?: () => HTMLElement;\n}\n\nexport const OptionsMenuToggleWithText: React.FunctionComponent<OptionsMenuToggleWithTextProps> = ({\n  parentId = '',\n  toggleText,\n  toggleTextClassName = '',\n  toggleButtonContents,\n  toggleButtonContentsClassName = '',\n  onToggle = () => null as any,\n  isOpen = false,\n  isPlain = false,\n  /* eslint-disable @typescript-eslint/no-unused-vars */\n  isText = true,\n  isDisabled = false,\n  /* eslint-disable @typescript-eslint/no-unused-vars */\n  isActive = false,\n  'aria-haspopup': ariaHasPopup,\n  parentRef,\n  /* eslint-disable @typescript-eslint/no-unused-vars */\n  getMenuRef,\n  onEnter,\n  /* eslint-enable @typescript-eslint/no-unused-vars */\n  'aria-label': ariaLabel = 'Options menu',\n  ...props\n}: OptionsMenuToggleWithTextProps) => {\n  const buttonRef = React.useRef<HTMLButtonElement>();\n\n  React.useEffect(() => {\n    document.addEventListener('mousedown', onDocClick);\n    document.addEventListener('touchstart', onDocClick);\n    document.addEventListener('keydown', onEscPress);\n    return () => {\n      document.removeEventListener('mousedown', onDocClick);\n      document.removeEventListener('touchstart', onDocClick);\n      document.removeEventListener('keydown', onEscPress);\n    };\n  });\n\n  const onDocClick = (event: MouseEvent | TouchEvent) => {\n    if (isOpen && parentRef && parentRef.current && !parentRef.current.contains(event.target as Node)) {\n      onToggle(false);\n      buttonRef.current.focus();\n    }\n  };\n\n  const onKeyDown = (event: React.KeyboardEvent<any>) => {\n    if (event.key === 'Tab' && !isOpen) {\n      return;\n    }\n    event.preventDefault();\n    if ((event.key === 'Enter' || event.key === ' ') && isOpen) {\n      onToggle(!isOpen);\n    } else if ((event.key === 'Enter' || event.key === ' ') && !isOpen) {\n      onToggle(!isOpen);\n      onEnter(event);\n    }\n  };\n\n  const onEscPress = (event: KeyboardEvent) => {\n    const keyCode = event.keyCode || event.which;\n    if (\n      isOpen &&\n      (keyCode === KEY_CODES.ESCAPE_KEY || event.key === 'Tab') &&\n      parentRef &&\n      parentRef.current &&\n      parentRef.current.contains(event.target as Node)\n    ) {\n      onToggle(false);\n      buttonRef.current.focus();\n    }\n  };\n\n  return (\n    <div\n      className={css(\n        styles.optionsMenuToggle,\n        styles.modifiers.text,\n        isPlain && styles.modifiers.plain,\n        isDisabled && styles.modifiers.disabled,\n        isActive && styles.modifiers.active\n      )}\n      {...props}\n    >\n      <span className={css(styles.optionsMenuToggleText, toggleTextClassName)}>{toggleText}</span>\n      <button\n        className={css(styles.optionsMenuToggleButton, toggleButtonContentsClassName)}\n        id={`${parentId}-toggle`}\n        aria-haspopup=\"listbox\"\n        aria-label={ariaLabel}\n        aria-expanded={isOpen}\n        ref={buttonRef}\n        disabled={isDisabled}\n        onClick={() => onToggle(!isOpen)}\n        onKeyDown={onKeyDown}\n      >\n        <span className={css(styles.optionsMenuToggleButtonIcon)}>{toggleButtonContents}</span>\n      </button>\n    </div>\n  );\n};\nOptionsMenuToggleWithText.displayName = 'OptionsMenuToggleWithText';\n"]},"metadata":{},"sourceType":"module"}