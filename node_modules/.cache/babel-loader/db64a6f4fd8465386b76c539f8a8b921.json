{"ast":null,"code":"import _slicedToArray from \"/home/pkorytar/Projects/RedHat/pnc-web-ui-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport { __rest } from \"tslib\";\nimport * as React from 'react';\nimport styles from '@patternfly/react-styles/css/components/MultipleFileUpload/multiple-file-upload';\nimport { css } from '@patternfly/react-styles';\nimport { Progress } from '../Progress';\nimport { Button } from '../Button';\nimport FileIcon from '@patternfly/react-icons/dist/esm/icons/file-icon';\nimport TimesCircleIcon from '@patternfly/react-icons/dist/esm/icons/times-circle-icon';\nexport var MultipleFileUploadStatusItem = function MultipleFileUploadStatusItem(_a) {\n  var className = _a.className,\n      file = _a.file,\n      fileIcon = _a.fileIcon,\n      _a$onReadStarted = _a.onReadStarted,\n      onReadStarted = _a$onReadStarted === void 0 ? function () {} : _a$onReadStarted,\n      _a$onReadFinished = _a.onReadFinished,\n      onReadFinished = _a$onReadFinished === void 0 ? function () {} : _a$onReadFinished,\n      _a$onReadSuccess = _a.onReadSuccess,\n      onReadSuccess = _a$onReadSuccess === void 0 ? function () {} : _a$onReadSuccess,\n      _a$onReadFail = _a.onReadFail,\n      onReadFail = _a$onReadFail === void 0 ? function () {} : _a$onReadFail,\n      _a$onClearClick = _a.onClearClick,\n      onClearClick = _a$onClearClick === void 0 ? function () {} : _a$onClearClick,\n      customFileHandler = _a.customFileHandler,\n      fileName = _a.fileName,\n      fileSize = _a.fileSize,\n      progressValue = _a.progressValue,\n      progressVariant = _a.progressVariant,\n      progressAriaLabel = _a.progressAriaLabel,\n      progressAriaLabelledBy = _a.progressAriaLabelledBy,\n      progressId = _a.progressId,\n      _a$buttonAriaLabel = _a.buttonAriaLabel,\n      buttonAriaLabel = _a$buttonAriaLabel === void 0 ? 'Remove from list' : _a$buttonAriaLabel,\n      props = __rest(_a, [\"className\", \"file\", \"fileIcon\", \"onReadStarted\", \"onReadFinished\", \"onReadSuccess\", \"onReadFail\", \"onClearClick\", \"customFileHandler\", \"fileName\", \"fileSize\", \"progressValue\", \"progressVariant\", \"progressAriaLabel\", \"progressAriaLabelledBy\", \"progressId\", \"buttonAriaLabel\"]);\n\n  var _React$useState = React.useState(0),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      loadPercentage = _React$useState2[0],\n      setLoadPercentage = _React$useState2[1];\n\n  var _React$useState3 = React.useState(),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      loadResult = _React$useState4[0],\n      setLoadResult = _React$useState4[1];\n\n  function readFile(file) {\n    return new Promise(function (resolve, reject) {\n      var reader = new FileReader();\n\n      reader.onload = function () {\n        return resolve(reader.result);\n      };\n\n      reader.onerror = function () {\n        return reject(reader.error);\n      };\n\n      reader.onprogress = function (data) {\n        if (data.lengthComputable) {\n          setLoadPercentage(data.loaded / data.total * 100);\n        }\n      };\n\n      reader.readAsDataURL(file);\n    });\n  }\n\n  React.useEffect(function () {\n    if (customFileHandler) {\n      customFileHandler(file);\n    } else {\n      onReadStarted(file);\n      readFile(file).then(function (data) {\n        setLoadResult('success');\n        setLoadPercentage(100);\n        onReadFinished(file);\n        onReadSuccess(data, file);\n      }).catch(function (error) {\n        onReadFinished(file);\n        onReadFail(error, file);\n        setLoadResult('danger');\n      });\n    }\n  }, []);\n\n  var getHumanReadableFileSize = function getHumanReadableFileSize(size) {\n    var prefixes = ['', 'K', 'M', 'G', 'T'];\n    var prefixUnit = 0;\n\n    while (size >= 1000) {\n      prefixUnit += 1;\n      size = size / 1000;\n    }\n\n    if (prefixUnit >= prefixes.length) {\n      return 'File size too large';\n    }\n\n    return \"\".concat(Math.round(size)).concat(prefixes[prefixUnit], \"B\");\n  };\n\n  var title = React.createElement(\"span\", {\n    className: styles.multipleFileUploadStatusItemProgress\n  }, React.createElement(\"span\", {\n    className: styles.multipleFileUploadStatusItemProgressText\n  }, fileName || (file === null || file === void 0 ? void 0 : file.name) || ''), React.createElement(\"span\", {\n    className: styles.multipleFileUploadStatusItemProgressSize\n  }, fileSize || getHumanReadableFileSize((file === null || file === void 0 ? void 0 : file.size) || 0)));\n  return React.createElement(\"li\", Object.assign({\n    className: css(styles.multipleFileUploadStatusItem, className)\n  }, props), React.createElement(\"div\", {\n    className: styles.multipleFileUploadStatusItemIcon\n  }, fileIcon || React.createElement(FileIcon, null)), React.createElement(\"div\", {\n    className: styles.multipleFileUploadStatusItemMain\n  }, React.createElement(Progress, {\n    title: title,\n    value: progressValue || loadPercentage,\n    variant: progressVariant || loadResult,\n    \"aria-label\": progressAriaLabel,\n    \"aria-labelledby\": progressAriaLabelledBy,\n    id: progressId\n  })), React.createElement(\"div\", {\n    className: styles.multipleFileUploadStatusItemClose\n  }, React.createElement(Button, {\n    variant: \"plain\",\n    \"aria-label\": buttonAriaLabel,\n    onClick: onClearClick\n  }, React.createElement(TimesCircleIcon, null))));\n};\nMultipleFileUploadStatusItem.displayName = 'MultipleFileUploadStatusItem';","map":{"version":3,"mappings":"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","names":["React","styles","css","Progress","Button","FileIcon","TimesCircleIcon","MultipleFileUploadStatusItem","_a","className","file","fileIcon","onReadStarted","onReadFinished","onReadSuccess","onReadFail","onClearClick","customFileHandler","fileName","fileSize","progressValue","progressVariant","progressAriaLabel","progressAriaLabelledBy","progressId","buttonAriaLabel","props","__rest","useState","loadPercentage","setLoadPercentage","loadResult","setLoadResult","readFile","Promise","resolve","reject","reader","FileReader","onload","result","onerror","error","onprogress","data","lengthComputable","loaded","total","readAsDataURL","useEffect","then","catch","getHumanReadableFileSize","size","prefixes","prefixUnit","length","Math","round","title","multipleFileUploadStatusItemProgress","multipleFileUploadStatusItemProgressText","name","multipleFileUploadStatusItemProgressSize","multipleFileUploadStatusItem","multipleFileUploadStatusItemIcon","multipleFileUploadStatusItemMain","value","variant","id","multipleFileUploadStatusItemClose","onClick","displayName"],"sources":["/home/pkorytar/Projects/RedHat/pnc-web-ui-react/node_modules/@patternfly/react-core/src/components/MultipleFileUpload/MultipleFileUploadStatusItem.tsx"],"sourcesContent":["import * as React from 'react';\nimport styles from '@patternfly/react-styles/css/components/MultipleFileUpload/multiple-file-upload';\nimport { css } from '@patternfly/react-styles';\nimport { Progress } from '../Progress';\nimport { Button } from '../Button';\nimport FileIcon from '@patternfly/react-icons/dist/esm/icons/file-icon';\nimport TimesCircleIcon from '@patternfly/react-icons/dist/esm/icons/times-circle-icon';\n\nexport interface MultipleFileUploadStatusItemProps extends React.HTMLProps<HTMLLIElement> {\n  /** Class to add to outer div */\n  className?: string;\n  /** Adds accessibility text to the status item deletion button */\n  buttonAriaLabel?: string;\n  /** The file object being represented by the status item */\n  file?: File;\n  /** A callback for when a selected file starts loading */\n  onReadStarted?: (fileHandle: File) => void;\n  /** A callback for when a selected file finishes loading */\n  onReadFinished?: (fileHandle: File) => void;\n  /** A callback for when the FileReader successfully reads the file */\n  onReadSuccess?: (data: string, file: File) => void;\n  /** A callback for when the FileReader API fails */\n  onReadFail?: (error: DOMException, onReadFail: File) => void;\n  /** Clear button was clicked */\n  onClearClick?: React.MouseEventHandler<HTMLButtonElement>;\n\n  // Props to bypass built in behavior\n\n  /** A callback to process file reading in a custom way */\n  customFileHandler?: (file: File) => void;\n  /** A custom icon to show in place of the generic file icon */\n  fileIcon?: React.ReactNode;\n  /** A custom name to display for the file rather than using built in functionality to auto-fill it */\n  fileName?: string;\n  /** A custom file size to display for the file rather than using built in functionality to auto-fill it */\n  fileSize?: number;\n  /** A custom value to display for the progress component rather than using built in functionality to auto-fill it */\n  progressValue?: number;\n  /** A custom variant to apply to the progress component rather than using built in functionality to auto-fill it */\n  progressVariant?: 'danger' | 'success' | 'warning';\n\n  // Props passed through to the progress component\n\n  /** Adds accessible text to the progress bar. Required when title not used and there is not any label associated with the progress bar */\n  progressAriaLabel?: string;\n  /** Associates the progress bar with it's label for accessibility purposes. Required when title not used */\n  progressAriaLabelledBy?: string;\n  /** Unique identifier for progress. Generated if not specified. */\n  progressId?: string;\n}\n\nexport const MultipleFileUploadStatusItem: React.FunctionComponent<MultipleFileUploadStatusItemProps> = ({\n  className,\n  file,\n  fileIcon,\n  onReadStarted = () => {},\n  onReadFinished = () => {},\n  onReadSuccess = () => {},\n  onReadFail = () => {},\n  onClearClick = () => {},\n  customFileHandler,\n  fileName,\n  fileSize,\n  progressValue,\n  progressVariant,\n  progressAriaLabel,\n  progressAriaLabelledBy,\n  progressId,\n  buttonAriaLabel = 'Remove from list',\n  ...props\n}: MultipleFileUploadStatusItemProps) => {\n  const [loadPercentage, setLoadPercentage] = React.useState(0);\n  const [loadResult, setLoadResult] = React.useState<undefined | 'danger' | 'success'>();\n\n  function readFile(file: File) {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.onload = () => resolve(reader.result);\n      reader.onerror = () => reject(reader.error);\n      reader.onprogress = data => {\n        if (data.lengthComputable) {\n          setLoadPercentage((data.loaded / data.total) * 100);\n        }\n      };\n      reader.readAsDataURL(file);\n    });\n  }\n\n  React.useEffect(() => {\n    if (customFileHandler) {\n      customFileHandler(file);\n    } else {\n      onReadStarted(file);\n      readFile(file)\n        .then(data => {\n          setLoadResult('success');\n          setLoadPercentage(100);\n          onReadFinished(file);\n          onReadSuccess(data as string, file);\n        })\n        .catch((error: DOMException) => {\n          onReadFinished(file);\n          onReadFail(error, file);\n          setLoadResult('danger');\n        });\n    }\n  }, []);\n\n  const getHumanReadableFileSize = (size: number) => {\n    const prefixes = ['', 'K', 'M', 'G', 'T'];\n    let prefixUnit = 0;\n    while (size >= 1000) {\n      prefixUnit += 1;\n      size = size / 1000;\n    }\n\n    if (prefixUnit >= prefixes.length) {\n      return 'File size too large';\n    }\n\n    return `${Math.round(size)}${prefixes[prefixUnit]}B`;\n  };\n\n  const title = (\n    <span className={styles.multipleFileUploadStatusItemProgress}>\n      <span className={styles.multipleFileUploadStatusItemProgressText}>{fileName || file?.name || ''}</span>\n      <span className={styles.multipleFileUploadStatusItemProgressSize}>\n        {fileSize || getHumanReadableFileSize(file?.size || 0)}\n      </span>\n    </span>\n  );\n\n  return (\n    <li className={css(styles.multipleFileUploadStatusItem, className)} {...props}>\n      <div className={styles.multipleFileUploadStatusItemIcon}>{fileIcon || <FileIcon />}</div>\n      <div className={styles.multipleFileUploadStatusItemMain}>\n        <Progress\n          title={title}\n          value={progressValue || loadPercentage}\n          variant={progressVariant || loadResult}\n          aria-label={progressAriaLabel}\n          aria-labelledby={progressAriaLabelledBy}\n          id={progressId}\n        />\n      </div>\n      <div className={styles.multipleFileUploadStatusItemClose}>\n        <Button variant=\"plain\" aria-label={buttonAriaLabel} onClick={onClearClick}>\n          <TimesCircleIcon />\n        </Button>\n      </div>\n    </li>\n  );\n};\n\nMultipleFileUploadStatusItem.displayName = 'MultipleFileUploadStatusItem';\n"]},"metadata":{},"sourceType":"module"}