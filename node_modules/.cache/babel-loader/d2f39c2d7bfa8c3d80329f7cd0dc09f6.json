{"ast":null,"code":"var _jsxFileName = \"/home/pkorytar/Projects/RedHat/pnc-web-ui-react/src/components/SearchSelect/SearchSelect.tsx\";\nimport { Select, SelectOption, SelectVariant } from '@patternfly/react-core';\nimport { useEffect, useRef, useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const SearchSelect = _ref => {\n  let {\n    attribute,\n    callback\n  } = _ref;\n  const [selectOptions, setSelectOptions] = useState([[{\n    value: 'a'\n  }]]);\n  const [isSelectOpen, setIsSelectOpen] = useState(false);\n  const [selected, setSelected] = useState();\n  const [loading, setLoading] = useState(false);\n  const timer = useRef();\n  useEffect(() => {\n    setLoading(true);\n    callback({\n      params: {\n        pageSize: 20\n      }\n    }).then(response => {\n      const obj = response.data.content.map(obj => {\n        return {\n          value: obj[attribute]\n        };\n      });\n      setSelectOptions(obj);\n      setLoading(false);\n    });\n  }, [callback, attribute]);\n\n  const clearSelection = () => {\n    setSelected(null);\n    setIsSelectOpen(false);\n    setLoading(true);\n    callback({\n      params: {\n        pageSize: 20\n      }\n    }).then(response => {\n      const obj = response.data.content.map(obj => {\n        return {\n          value: obj[attribute]\n        };\n      });\n      setSelectOptions(obj);\n      setLoading(false);\n    });\n    console.log('B>>>');\n  };\n\n  return /*#__PURE__*/_jsxDEV(Select, {\n    variant: SelectVariant.typeahead,\n    onToggle: isOpen => {\n      setIsSelectOpen(isOpen);\n    },\n    loadingVariant: loading ? 'spinner' : undefined,\n    onSelect: (event, selection, isPlaceholder) => {\n      if (isPlaceholder) clearSelection();else {\n        setSelected(selection);\n        setIsSelectOpen(false);\n      }\n    },\n    onTypeaheadInputChanged: val => {\n      clearTimeout(timer === null || timer === void 0 ? void 0 : timer.current);\n      timer.current = setTimeout(() => {\n        setLoading(true);\n        callback({\n          params: {\n            pageSize: 20,\n            q: `${attribute}=like=\"%${val}%\"`\n          }\n        }).then(response => {\n          setSelectOptions(response.data.content.map(obj => {\n            return {\n              value: obj[attribute]\n            };\n          }));\n          setLoading(false);\n        });\n      }, 500);\n    },\n    isInputFilterPersisted: true,\n    isInputValuePersisted: true,\n    onClear: clearSelection,\n    onFilter: () => {\n      return selectOptions;\n    },\n    selections: selected,\n    isOpen: isSelectOpen,\n    children: selectOptions.map((option, index) => /*#__PURE__*/_jsxDEV(SelectOption, {\n      value: option.value\n    }, index, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 5\n  }, this);\n};","map":{"version":3,"names":["Select","SelectOption","SelectVariant","useEffect","useRef","useState","SearchSelect","attribute","callback","selectOptions","setSelectOptions","value","isSelectOpen","setIsSelectOpen","selected","setSelected","loading","setLoading","timer","params","pageSize","then","response","obj","data","content","map","clearSelection","console","log","typeahead","isOpen","undefined","event","selection","isPlaceholder","val","clearTimeout","current","setTimeout","q","option","index"],"sources":["/home/pkorytar/Projects/RedHat/pnc-web-ui-react/src/components/SearchSelect/SearchSelect.tsx"],"sourcesContent":["import { Select, SelectOption, SelectVariant } from '@patternfly/react-core';\nimport { useEffect, useRef, useState } from 'react';\n\ninterface ISearchSelect {\n  attribute: string;\n  callback: Function;\n}\n\nexport const SearchSelect = ({ attribute, callback }: ISearchSelect) => {\n  const [selectOptions, setSelectOptions] = useState<any>([[{ value: 'a' }]]);\n  const [isSelectOpen, setIsSelectOpen] = useState<boolean>(false);\n  const [selected, setSelected] = useState<any>();\n  const [loading, setLoading] = useState<boolean>(false);\n  const timer = useRef<any>();\n\n  useEffect(() => {\n    setLoading(true);\n    callback({ params: { pageSize: 20 } }).then((response: any) => {\n      const obj = response.data.content.map((obj: any) => {\n        return {\n          value: obj[attribute],\n        };\n      });\n      setSelectOptions(obj);\n      setLoading(false);\n    });\n  }, [callback, attribute]);\n\n  const clearSelection = () => {\n    setSelected(null);\n    setIsSelectOpen(false);\n    setLoading(true);\n    callback({ params: { pageSize: 20 } }).then((response: any) => {\n      const obj = response.data.content.map((obj: any) => {\n        return {\n          value: obj[attribute],\n        };\n      });\n      setSelectOptions(obj);\n      setLoading(false);\n    });\n    console.log('B>>>');\n  };\n\n  return (\n    <Select\n      variant={SelectVariant.typeahead}\n      onToggle={(isOpen) => {\n        setIsSelectOpen(isOpen);\n      }}\n      loadingVariant={loading ? 'spinner' : undefined}\n      onSelect={(event, selection, isPlaceholder) => {\n        if (isPlaceholder) clearSelection();\n        else {\n          setSelected(selection);\n          setIsSelectOpen(false);\n        }\n      }}\n      onTypeaheadInputChanged={(val: string) => {\n        clearTimeout(timer?.current);\n        timer.current = setTimeout(() => {\n          setLoading(true);\n          callback({ params: { pageSize: 20, q: `${attribute}=like=\"%${val}%\"` } }).then((response: any) => {\n            setSelectOptions(\n              response.data.content.map((obj: any) => {\n                return {\n                  value: obj[attribute],\n                };\n              })\n            );\n            setLoading(false);\n          });\n        }, 500);\n      }}\n      isInputFilterPersisted={true}\n      isInputValuePersisted={true}\n      onClear={clearSelection}\n      onFilter={() => {\n        return selectOptions;\n      }}\n      selections={selected}\n      isOpen={isSelectOpen}\n    >\n      {selectOptions.map((option: any, index: any) => (\n        <SelectOption key={index} value={option.value} />\n      ))}\n    </Select>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}