{"ast":null,"code":"import deepmerge from 'deepmerge';\nimport { compare } from 'fast-json-patch';\n// import merge from 'lodash-es/merge';\nexport const createPatchData = data => {\n  return Object.fromEntries(Object.entries(data).filter(_ref => {\n    let [k, v] = _ref;\n    return v.value !== '';\n  }).map(_ref2 => {\n    let [k, v] = _ref2;\n    return [k, v.value];\n  }));\n};\n/**\n * Compares changes between original and modified data and creates JSON patch.\n * import { map, tail, times, uniq } from 'lodash';\n *\n * @param original - original data\n * @param modified - modified data\n * @returns Array of changes in JSON patch format\n */\n\nexport const createSafePatch = (original, modified) => {\n  return compare(original, deepmerge(original, modified));\n};\n/**\n *\n * @param original - original data\n * @param modified - modified data\n * @returns Array of changes in JSON patch format\n */\n\nexport const createDestructivePatch = (original, modified) => {\n  return compare(original, modified);\n};","map":{"version":3,"names":["deepmerge","compare","createPatchData","data","Object","fromEntries","entries","filter","k","v","value","map","createSafePatch","original","modified","createDestructivePatch"],"sources":["/home/pkorytar/Projects/RedHat/pnc-web-ui-react/src/utils/patchHelper.tsx"],"sourcesContent":["import deepmerge from 'deepmerge';\nimport { Operation, compare } from 'fast-json-patch';\n\nimport { IFieldValues, IFields } from '../containers/useForm';\n\n// import merge from 'lodash-es/merge';\n\nexport const createPatchData = (data: IFields): IFieldValues => {\n  return Object.fromEntries(\n    Object.entries(data)\n      .filter(([k, v]) => v.value !== '')\n      .map(([k, v]) => {\n        return [k, v.value];\n      })\n  );\n};\n\n/**\n * Compares changes between original and modified data and creates JSON patch.\n * import { map, tail, times, uniq } from 'lodash';\n *\n * @param original - original data\n * @param modified - modified data\n * @returns Array of changes in JSON patch format\n */\nexport const createSafePatch = (original: Object | any[], modified: Object | any[]): Operation[] => {\n  return compare(original, deepmerge(original, modified));\n};\n\n/**\n *\n * @param original - original data\n * @param modified - modified data\n * @returns Array of changes in JSON patch format\n */\nexport const createDestructivePatch = (original: Object | any[], modified: Object | any[]): Operation[] => {\n  return compare(original, modified);\n};\n"],"mappings":"AAAA,OAAOA,SAAP,MAAsB,WAAtB;AACA,SAAoBC,OAApB,QAAmC,iBAAnC;AAIA;AAEA,OAAO,MAAMC,eAAe,GAAIC,IAAD,IAAiC;EAC9D,OAAOC,MAAM,CAACC,WAAP,CACLD,MAAM,CAACE,OAAP,CAAeH,IAAf,EACGI,MADH,CACU;IAAA,IAAC,CAACC,CAAD,EAAIC,CAAJ,CAAD;IAAA,OAAYA,CAAC,CAACC,KAAF,KAAY,EAAxB;EAAA,CADV,EAEGC,GAFH,CAEO,SAAY;IAAA,IAAX,CAACH,CAAD,EAAIC,CAAJ,CAAW;IACf,OAAO,CAACD,CAAD,EAAIC,CAAC,CAACC,KAAN,CAAP;EACD,CAJH,CADK,CAAP;AAOD,CARM;AAUP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,MAAME,eAAe,GAAG,CAACC,QAAD,EAA2BC,QAA3B,KAAqE;EAClG,OAAOb,OAAO,CAACY,QAAD,EAAWb,SAAS,CAACa,QAAD,EAAWC,QAAX,CAApB,CAAd;AACD,CAFM;AAIP;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,MAAMC,sBAAsB,GAAG,CAACF,QAAD,EAA2BC,QAA3B,KAAqE;EACzG,OAAOb,OAAO,CAACY,QAAD,EAAWC,QAAX,CAAd;AACD,CAFM"},"metadata":{},"sourceType":"module"}