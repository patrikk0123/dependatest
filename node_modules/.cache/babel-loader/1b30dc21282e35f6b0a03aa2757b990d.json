{"ast":null,"code":"import{Tooltip}from'@patternfly/react-core';import{OutlinedClockIcon,ExclamationTriangleIcon}from'@patternfly/react-icons';import styles from'./BuildStatusIcon.module.css';import iconBlue from'./icons/blue.svg';import iconError from'./icons/error.svg';import iconGreen from'./icons/green.svg';import iconGrey from'./icons/grey.svg';import iconOrange from'./icons/orange.svg';import iconRed from'./icons/red.svg';import iconNoBuilds from'./icons/no-builds.svg';import{isBuild}from'../../utils/entityRecognition';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var iconData={SUCCESS:{tooltip:'Build completed successfully',icon:iconGreen},FAILED:{tooltip:'Build Failed',icon:iconRed},NO_REBUILD_REQUIRED:{tooltip:'No rebuild required',icon:iconGreen,className:'added-opacity'},ENQUEUED:{tooltip:'Enqueued',icon:iconBlue},WAITING_FOR_DEPENDENCIES:{tooltip:'Waiting for dependencies',icon:iconBlue},BUILDING:{tooltip:'Build in progress',icon:iconBlue,className:'animate-flicker'},REJECTED:{tooltip:'Build rejected',icon:iconRed},REJECTED_FAILED_DEPENDENCIES:{tooltip:'Build rejected: dependencies failed',icon:iconOrange},CANCELLED:{tooltip:'Build cancelled',icon:iconGrey},SYSTEM_ERROR:{tooltip:'A system error occurred',icon:iconError},NEW:{tooltip:'New',icon:iconGrey},UNKNOWN:{tooltip:'Unknown build status',icon:iconNoBuilds}};var alignmentData={PREFER_TEMPORARY:{tooltip:\"Test build, which cannot be used for product release and which will be garbage collected during automatic cleaning. \\n    Latest temporary dependencies' versions were preferred in alignment.\",className:'icon-color-info'},PREFER_PERSISTENT:{tooltip:\"Test build, which cannot be used for product release and which will be garbage collected during automatic cleaning. \\n    Latest persistent dependencies' versions were preferred in alignment.\",className:'icon-color-warning'},NOT_SPECIFIED:{tooltip:\"Test build, which cannot be used for product release and which will be garbage collected during automatic\\n    cleaning. Alignment Preference was not defined.\",className:'icon-color-info'}};/**\n * Represents a component for displaying the status of a build/groupBuild in form of an icon.\n * There are two versions: short (default) and long.\n *\n * Long version additionally also includes the status in the text format next to the icon.\n *\n * @param build - Build or GroupBuild\n * @param long - Whether the component should be of the long version\n */export var BuildStatusIcon=function BuildStatusIcon(_ref){var _attributes,_attributes2;var build=_ref.build,long=_ref.long;var selectedIconData=build.status?iconData[build.status]:iconData.UNKNOWN;var selectedIconImage=selectedIconData.icon;var isCorrupted=isBuild(build)&&(((_attributes=build.attributes)===null||_attributes===void 0?void 0:_attributes.POST_BUILD_REPO_VALIDATION)==='REPO_SYSTEM_ERROR'||((_attributes2=build.attributes)===null||_attributes2===void 0?void 0:_attributes2.PNC_SYSTEM_ERROR)==='DISABLED_FIREWALL');return/*#__PURE__*/_jsxs(\"span\",{className:styles['build-status-icon'],children:[/*#__PURE__*/_jsx(Tooltip,{content:/*#__PURE__*/_jsx(\"div\",{children:selectedIconData.tooltip}),children:/*#__PURE__*/_jsx(\"img\",{src:selectedIconImage,width:\"28px\",height:\"28px\",className:selectedIconData.className&&styles[selectedIconData.className],alt:selectedIconData.tooltip})}),isCorrupted&&/*#__PURE__*/_jsx(Tooltip,{position:\"right\",content:/*#__PURE__*/_jsx(\"div\",{children:\"The build may have completed successfully but has since been corrupted by a system error.\"}),children:/*#__PURE__*/_jsx(ExclamationTriangleIcon,{})}),build.temporaryBuild&&/*#__PURE__*/_jsx(Tooltip,{position:\"right\",content:/*#__PURE__*/_jsx(\"div\",{children:alignmentData[build.alignmentPreference||'NOT_SPECIFIED'].tooltip}),children:/*#__PURE__*/_jsx(OutlinedClockIcon,{className:styles[alignmentData[build.alignmentPreference||'NOT_SPECIFIED'].className]})}),long&&build.status]});};","map":{"version":3,"names":["Tooltip","OutlinedClockIcon","ExclamationTriangleIcon","styles","iconBlue","iconError","iconGreen","iconGrey","iconOrange","iconRed","iconNoBuilds","isBuild","iconData","SUCCESS","tooltip","icon","FAILED","NO_REBUILD_REQUIRED","className","ENQUEUED","WAITING_FOR_DEPENDENCIES","BUILDING","REJECTED","REJECTED_FAILED_DEPENDENCIES","CANCELLED","SYSTEM_ERROR","NEW","UNKNOWN","alignmentData","PREFER_TEMPORARY","PREFER_PERSISTENT","NOT_SPECIFIED","BuildStatusIcon","build","long","selectedIconData","status","selectedIconImage","isCorrupted","attributes","POST_BUILD_REPO_VALIDATION","PNC_SYSTEM_ERROR","temporaryBuild","alignmentPreference"],"sources":["/home/pkorytar/Projects/RedHat/pnc-web-ui-react/src/components/BuildStatusIcon/BuildStatusIcon.tsx"],"sourcesContent":["import { Tooltip } from '@patternfly/react-core';\nimport { OutlinedClockIcon, ExclamationTriangleIcon } from '@patternfly/react-icons';\nimport { Build, GroupBuild } from 'pnc-api-types-ts';\n\nimport styles from './BuildStatusIcon.module.css';\n\nimport iconBlue from './icons/blue.svg';\nimport iconError from './icons/error.svg';\nimport iconGreen from './icons/green.svg';\nimport iconGrey from './icons/grey.svg';\nimport iconOrange from './icons/orange.svg';\nimport iconRed from './icons/red.svg';\nimport iconNoBuilds from './icons/no-builds.svg';\nimport { isBuild } from '../../utils/entityRecognition';\n\nconst iconData: { [buildStatus: string]: { tooltip: string; icon: any; className?: string } } = {\n  SUCCESS: {\n    tooltip: 'Build completed successfully',\n    icon: iconGreen,\n  },\n  FAILED: {\n    tooltip: 'Build Failed',\n    icon: iconRed,\n  },\n  NO_REBUILD_REQUIRED: {\n    tooltip: 'No rebuild required',\n    icon: iconGreen,\n    className: 'added-opacity',\n  },\n  ENQUEUED: {\n    tooltip: 'Enqueued',\n    icon: iconBlue,\n  },\n  WAITING_FOR_DEPENDENCIES: {\n    tooltip: 'Waiting for dependencies',\n    icon: iconBlue,\n  },\n  BUILDING: {\n    tooltip: 'Build in progress',\n    icon: iconBlue,\n    className: 'animate-flicker',\n  },\n  REJECTED: {\n    tooltip: 'Build rejected',\n    icon: iconRed,\n  },\n  REJECTED_FAILED_DEPENDENCIES: {\n    tooltip: 'Build rejected: dependencies failed',\n    icon: iconOrange,\n  },\n  CANCELLED: {\n    tooltip: 'Build cancelled',\n    icon: iconGrey,\n  },\n  SYSTEM_ERROR: {\n    tooltip: 'A system error occurred',\n    icon: iconError,\n  },\n  NEW: {\n    tooltip: 'New',\n    icon: iconGrey,\n  },\n  UNKNOWN: {\n    tooltip: 'Unknown build status',\n    icon: iconNoBuilds,\n  },\n};\n\nconst alignmentData = {\n  PREFER_TEMPORARY: {\n    tooltip: `Test build, which cannot be used for product release and which will be garbage collected during automatic cleaning. \n    Latest temporary dependencies' versions were preferred in alignment.`,\n    className: 'icon-color-info',\n  },\n  PREFER_PERSISTENT: {\n    tooltip: `Test build, which cannot be used for product release and which will be garbage collected during automatic cleaning. \n    Latest persistent dependencies' versions were preferred in alignment.`,\n    className: 'icon-color-warning',\n  },\n  NOT_SPECIFIED: {\n    tooltip: `Test build, which cannot be used for product release and which will be garbage collected during automatic\n    cleaning. Alignment Preference was not defined.`,\n    className: 'icon-color-info',\n  },\n};\n\ninterface IBuildStatusIcon {\n  build: Build | GroupBuild;\n  long?: boolean;\n}\n\n/**\n * Represents a component for displaying the status of a build/groupBuild in form of an icon.\n * There are two versions: short (default) and long.\n *\n * Long version additionally also includes the status in the text format next to the icon.\n *\n * @param build - Build or GroupBuild\n * @param long - Whether the component should be of the long version\n */\nexport const BuildStatusIcon = ({ build, long }: IBuildStatusIcon) => {\n  const selectedIconData = build.status ? iconData[build.status] : iconData.UNKNOWN;\n  const selectedIconImage = selectedIconData.icon;\n  const isCorrupted =\n    isBuild(build) &&\n    ((build as Build).attributes?.POST_BUILD_REPO_VALIDATION === 'REPO_SYSTEM_ERROR' ||\n      (build as Build).attributes?.PNC_SYSTEM_ERROR === 'DISABLED_FIREWALL');\n\n  return (\n    <span className={styles['build-status-icon']}>\n      <Tooltip content={<div>{selectedIconData.tooltip}</div>}>\n        <img\n          src={selectedIconImage}\n          width=\"28px\"\n          height=\"28px\"\n          className={selectedIconData.className && styles[selectedIconData.className]}\n          alt={selectedIconData.tooltip}\n        />\n      </Tooltip>\n      {isCorrupted && (\n        <Tooltip\n          position=\"right\"\n          content={<div>The build may have completed successfully but has since been corrupted by a system error.</div>}\n        >\n          <ExclamationTriangleIcon />\n        </Tooltip>\n      )}\n      {build.temporaryBuild && (\n        <Tooltip position=\"right\" content={<div>{alignmentData[build.alignmentPreference || 'NOT_SPECIFIED'].tooltip}</div>}>\n          <OutlinedClockIcon className={styles[alignmentData[build.alignmentPreference || 'NOT_SPECIFIED'].className]} />\n        </Tooltip>\n      )}\n      {long && build.status}\n    </span>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}