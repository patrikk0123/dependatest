{"ast":null,"code":"import{Route,Routes}from'react-router-dom';// homepage\nimport{DashboardPage}from'./components/DashboardPage/DashboardPage';// entity pages\nimport{ArtifactsPage}from'./components/ArtifactsPage/ArtifactsPage';import{BuildConfigsPage}from'./components/BuildConfigsPage/BuildConfigsPage';import{BuildsPage}from'./components/BuildsPage/BuildsPage';import{GroupBuildsPage}from'./components/GroupBuildsPage/GroupBuildsPage';import{GroupConfigsPage}from'./components/GroupConfigsPage/GroupConfigsPage';import{ProductsPage}from'./components/ProductsPage/ProductsPage';import{ProjectsPage}from'./components/ProjectsPage/ProjectsPage';import{ProjectCreateEditPage}from'./components/ProjectCreateEditPage/ProjectCreateEditPage';import{ScmRepositoriesPage}from'./components/ScmRepositoriesPage/ScmRepositoriesPage';import{ProjectDetailPage}from'./components/ProjectDetailPage/ProjectDetailPage';// special pages\nimport{DemoPage}from'./components/DemoPage/DemoPage';import{VariablesPage}from'./components/VariablesPage/VariablesPage';import{NotFoundPage}from'./components/NotFoundPage/NotFoundPage';import{AdministrationPage}from'./components/AdministrationPage/AdministrationPage';import{keycloakService,AUTH_ROLE}from'./services/keycloakService';import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ProtectedRoute=function ProtectedRoute(_ref){var children=_ref.children,_ref$role=_ref.role,role=_ref$role===void 0?AUTH_ROLE.User:_ref$role;if(keycloakService.isAuthenticated()){if(keycloakService.hasRealmRole(role)){return/*#__PURE__*/_jsx(_Fragment,{children:children});}else{return/*#__PURE__*/_jsx(\"div\",{children:\"User not allowed\"});}}else{keycloakService.login().catch(function(){throw new Error('Keycloak login failed.');});}return/*#__PURE__*/_jsx(\"div\",{children:\"Redirecting to keycloak...\"});};export var AppRoutes=function AppRoutes(){return/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(DashboardPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"products\",element:/*#__PURE__*/_jsx(ProductsPage,{})}),/*#__PURE__*/_jsxs(Route,{path:\"projects\",children:[/*#__PURE__*/_jsx(Route,{index:true,element:/*#__PURE__*/_jsx(ProjectsPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"create\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(ProjectCreateEditPage,{})})}),/*#__PURE__*/_jsx(Route,{path:\":projectId/edit\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(ProjectCreateEditPage,{editPage:true})})}),/*#__PURE__*/_jsx(Route,{path:\":projectId\",element:/*#__PURE__*/_jsx(ProjectDetailPage,{})})]}),/*#__PURE__*/_jsx(Route,{path:\"build-configs\",element:/*#__PURE__*/_jsx(BuildConfigsPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"group-configs\",element:/*#__PURE__*/_jsx(GroupConfigsPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"builds\",element:/*#__PURE__*/_jsx(BuildsPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"group-builds\",element:/*#__PURE__*/_jsx(GroupBuildsPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"artifacts\",element:/*#__PURE__*/_jsx(ArtifactsPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"scm-repositories\",element:/*#__PURE__*/_jsx(ScmRepositoriesPage,{})}),/*#__PURE__*/_jsxs(Route,{path:\"admin\",children:[/*#__PURE__*/_jsx(Route,{path:\"demo\",element:/*#__PURE__*/_jsx(DemoPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"variables\",element:/*#__PURE__*/_jsx(VariablesPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"administration\",element:/*#__PURE__*/_jsx(ProtectedRoute,{role:AUTH_ROLE.Admin,children:/*#__PURE__*/_jsx(AdministrationPage,{})})})]}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(NotFoundPage,{})})]});};","map":{"version":3,"names":["Route","Routes","DashboardPage","ArtifactsPage","BuildConfigsPage","BuildsPage","GroupBuildsPage","GroupConfigsPage","ProductsPage","ProjectsPage","ProjectCreateEditPage","ScmRepositoriesPage","ProjectDetailPage","DemoPage","VariablesPage","NotFoundPage","AdministrationPage","keycloakService","AUTH_ROLE","ProtectedRoute","children","role","User","isAuthenticated","hasRealmRole","login","catch","Error","AppRoutes","Admin"],"sources":["/home/pkorytar/Projects/RedHat/pnc-web-ui-react/src/AppRoutes.tsx"],"sourcesContent":["import { Route, Routes } from 'react-router-dom';\n\n// homepage\nimport { DashboardPage } from './components/DashboardPage/DashboardPage';\n\n// entity pages\nimport { ArtifactsPage } from './components/ArtifactsPage/ArtifactsPage';\nimport { BuildConfigsPage } from './components/BuildConfigsPage/BuildConfigsPage';\nimport { BuildsPage } from './components/BuildsPage/BuildsPage';\nimport { GroupBuildsPage } from './components/GroupBuildsPage/GroupBuildsPage';\nimport { GroupConfigsPage } from './components/GroupConfigsPage/GroupConfigsPage';\nimport { ProductsPage } from './components/ProductsPage/ProductsPage';\nimport { ProjectsPage } from './components/ProjectsPage/ProjectsPage';\nimport { ProjectCreateEditPage } from './components/ProjectCreateEditPage/ProjectCreateEditPage';\nimport { ScmRepositoriesPage } from './components/ScmRepositoriesPage/ScmRepositoriesPage';\nimport { ProjectDetailPage } from './components/ProjectDetailPage/ProjectDetailPage';\n\n// special pages\nimport { DemoPage } from './components/DemoPage/DemoPage';\nimport { VariablesPage } from './components/VariablesPage/VariablesPage';\nimport { NotFoundPage } from './components/NotFoundPage/NotFoundPage';\nimport { AdministrationPage } from './components/AdministrationPage/AdministrationPage';\nimport { keycloakService, AUTH_ROLE } from './services/keycloakService';\n\ninterface IProtectedRouteProps {\n  role?: AUTH_ROLE;\n}\n\nconst ProtectedRoute = ({ children, role = AUTH_ROLE.User }: React.PropsWithChildren<IProtectedRouteProps>) => {\n  if (keycloakService.isAuthenticated()) {\n    if (keycloakService.hasRealmRole(role)) {\n      return <>{children}</>;\n    } else {\n      return <div>User not allowed</div>;\n    }\n  } else {\n    keycloakService.login().catch(() => {\n      throw new Error('Keycloak login failed.');\n    });\n  }\n\n  return <div>Redirecting to keycloak...</div>;\n};\n\nexport const AppRoutes = () => (\n  <Routes>\n    <Route path=\"/\" element={<DashboardPage />} />\n    {/* entity pages */}\n    <Route path=\"products\" element={<ProductsPage />} />\n    <Route path=\"projects\">\n      <Route index element={<ProjectsPage />} />\n      <Route\n        path=\"create\"\n        element={\n          <ProtectedRoute>\n            <ProjectCreateEditPage />\n          </ProtectedRoute>\n        }\n      />\n      <Route\n        path=\":projectId/edit\"\n        element={\n          <ProtectedRoute>\n            <ProjectCreateEditPage editPage={true} />\n          </ProtectedRoute>\n        }\n      />\n      <Route path=\":projectId\" element={<ProjectDetailPage />} />\n    </Route>\n    <Route path=\"build-configs\" element={<BuildConfigsPage />} />\n    <Route path=\"group-configs\" element={<GroupConfigsPage />} />\n    <Route path=\"builds\" element={<BuildsPage />} />\n    <Route path=\"group-builds\" element={<GroupBuildsPage />} />\n    <Route path=\"artifacts\" element={<ArtifactsPage />} />\n    <Route path=\"scm-repositories\" element={<ScmRepositoriesPage />} />\n\n    {/* special pages */}\n    <Route path=\"admin\">\n      <Route path=\"demo\" element={<DemoPage />} />\n      <Route path=\"variables\" element={<VariablesPage />} />\n      <Route\n        path=\"administration\"\n        element={\n          <ProtectedRoute role={AUTH_ROLE.Admin}>\n            <AdministrationPage />\n          </ProtectedRoute>\n        }\n      />\n    </Route>\n    <Route path=\"*\" element={<NotFoundPage />} />\n  </Routes>\n);\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}